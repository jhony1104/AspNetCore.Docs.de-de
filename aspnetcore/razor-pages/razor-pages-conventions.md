---
title: 'Razor-Seiten: Routen- und App-Konventionen in ASP.NET Core'
author: rick-anderson
description: Erfahren Sie, wie Konventionen für Routen- und App-Modellanbieter Sie beim Steuern von Seitenrouting, Ermittlung und Verarbeitung unterstützen können.
monikerRange: '>= aspnetcore-2.1'
ms.author: riande
ms.custom: mvc
ms.date: 02/07/2020
uid: razor-pages/razor-pages-conventions
ms.openlocfilehash: f45e327051aba54d1cab67148eb540fb1a5cc149
ms.sourcegitcommit: 9a129f5f3e31cc449742b164d5004894bfca90aa
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78651109"
---
# <a name="razor-pages-route-and-app-conventions-in-aspnet-core"></a><span data-ttu-id="3bc85-103">Razor-Seiten: Routen- und App-Konventionen in ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="3bc85-103">Razor Pages route and app conventions in ASP.NET Core</span></span>

::: moniker range=">= aspnetcore-3.0"

<span data-ttu-id="3bc85-104">Erfahren Sie, wie Sie in Apps für Razor-Seiten mithilfe von [Konventionen für Seitenrouten und App-Modellanbieter](xref:mvc/controllers/application-model#conventions) das Seitenrouting, die Ermittlung und die Verarbeitung steuern können.</span><span class="sxs-lookup"><span data-stu-id="3bc85-104">Learn how to use page [route and app model provider conventions](xref:mvc/controllers/application-model#conventions) to control page routing, discovery, and processing in Razor Pages apps.</span></span>

<span data-ttu-id="3bc85-105">Wenn Sie für einzelne Seiten benutzerdefinierte Seitenrouten konfigurieren müssen, sollten Sie das Routing zu den Seiten mithilfe der [AddPageRoute-Konvention](#configure-a-page-route) konfigurieren, die weiter unten in diesem Artikel beschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="3bc85-105">When you need to configure custom page routes for individual pages, configure routing to pages with the [AddPageRoute convention](#configure-a-page-route) described later in this topic.</span></span>

<span data-ttu-id="3bc85-106">Um eine Seitenroute anzugeben oder einer Route Segmente oder Parameter hinzuzufügen, verwenden Sie die Anweisung `@page` der Seite.</span><span class="sxs-lookup"><span data-stu-id="3bc85-106">To specify a page route, add route segments, or add parameters to a route, use the page's `@page` directive.</span></span> <span data-ttu-id="3bc85-107">Weitere Informationen finden Sie unter [Benutzerdefinierte Routen](xref:razor-pages/index#custom-routes).</span><span class="sxs-lookup"><span data-stu-id="3bc85-107">For more information, see [Custom routes](xref:razor-pages/index#custom-routes).</span></span>

<span data-ttu-id="3bc85-108">Es gibt reservierte Wörter, die nicht als Routensegmente oder Parameternamen verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="3bc85-108">There are reserved words that can't be used as route segments or parameter names.</span></span> <span data-ttu-id="3bc85-109">Weitere Informationen finden Sie unter [Routing: Reservierte Routingnamen](xref:fundamentals/routing#reserved-routing-names).</span><span class="sxs-lookup"><span data-stu-id="3bc85-109">For more information, see [Routing: Reserved routing names](xref:fundamentals/routing#reserved-routing-names).</span></span>

<span data-ttu-id="3bc85-110">[Anzeigen oder Herunterladen von Beispielcode](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/) ([Vorgehensweise zum Herunterladen](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="3bc85-110">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/) ([how to download](xref:index#how-to-download-a-sample))</span></span>

| <span data-ttu-id="3bc85-111">Szenario</span><span class="sxs-lookup"><span data-stu-id="3bc85-111">Scenario</span></span> | <span data-ttu-id="3bc85-112">Dieses Beispiel veranschaulicht Folgendes:</span><span class="sxs-lookup"><span data-stu-id="3bc85-112">The sample demonstrates ...</span></span> |
| -------- | --------------------------- |
| [<span data-ttu-id="3bc85-113">Model conventions (Modellkonventionen)</span><span class="sxs-lookup"><span data-stu-id="3bc85-113">Model conventions</span></span>](#model-conventions)<br><br><span data-ttu-id="3bc85-114">Conventions.Add</span><span class="sxs-lookup"><span data-stu-id="3bc85-114">Conventions.Add</span></span><ul><li><span data-ttu-id="3bc85-115">IPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-115">IPageRouteModelConvention</span></span></li><li><span data-ttu-id="3bc85-116">IPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-116">IPageApplicationModelConvention</span></span></li><li><span data-ttu-id="3bc85-117">IPageHandlerModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-117">IPageHandlerModelConvention</span></span></li></ul> | <span data-ttu-id="3bc85-118">Das Hinzufügen einer Routenvorlage und eines Headers zu den Seiten einer App</span><span class="sxs-lookup"><span data-stu-id="3bc85-118">Add a route template and header to an app's pages.</span></span> |
| [<span data-ttu-id="3bc85-119">Konventionen für Seitenroutenaktionen</span><span class="sxs-lookup"><span data-stu-id="3bc85-119">Page route action conventions</span></span>](#page-route-action-conventions)<ul><li><span data-ttu-id="3bc85-120">AddFolderRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-120">AddFolderRouteModelConvention</span></span></li><li><span data-ttu-id="3bc85-121">AddPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-121">AddPageRouteModelConvention</span></span></li><li><span data-ttu-id="3bc85-122">AddPageRoute</span><span class="sxs-lookup"><span data-stu-id="3bc85-122">AddPageRoute</span></span></li></ul> | <span data-ttu-id="3bc85-123">Das Hinzufügen einer Routenvorlage zu Seiten in einem Ordner und zu einer Einzelseite</span><span class="sxs-lookup"><span data-stu-id="3bc85-123">Add a route template to pages in a folder and to a single page.</span></span> |
| [<span data-ttu-id="3bc85-124">Konventionen für Seitenmodellaktionen</span><span class="sxs-lookup"><span data-stu-id="3bc85-124">Page model action conventions</span></span>](#page-model-action-conventions)<ul><li><span data-ttu-id="3bc85-125">AddFolderApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-125">AddFolderApplicationModelConvention</span></span></li><li><span data-ttu-id="3bc85-126">AddPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-126">AddPageApplicationModelConvention</span></span></li><li><span data-ttu-id="3bc85-127">ConfigureFilter (Filterklasse, Lambdaausdruck oder Filterzuordnungsinstanz)</span><span class="sxs-lookup"><span data-stu-id="3bc85-127">ConfigureFilter (filter class, lambda expression, or filter factory)</span></span></li></ul> | <span data-ttu-id="3bc85-128">Das Hinzufügen eines Headers zu Seiten in einem Ordner, das Hinzufügen eines Headers zu einer einzelnen Seite und das Konfigurieren einer [Filter-Factoy](xref:mvc/controllers/filters#ifilterfactory) zum Hinzufügen eines Headers zu den Seiten einer App.</span><span class="sxs-lookup"><span data-stu-id="3bc85-128">Add a header to pages in a folder, add a header to a single page, and configure a [filter factory](xref:mvc/controllers/filters#ifilterfactory) to add a header to an app's pages.</span></span> |

<span data-ttu-id="3bc85-129">Konventionen für Razor Pages werden <xref:Microsoft.Extensions.DependencyInjection.MvcServiceCollectionExtensions.AddMvc*> mithilfe der Erweiterungsmethode <xref:Microsoft.Extensions.DependencyInjection.MvcRazorPagesMvcBuilderExtensions.AddRazorPagesOptions*> unter der Dienstklasse in der Klasse `Startup` hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-129">Razor Pages conventions are added and configured using the <xref:Microsoft.Extensions.DependencyInjection.MvcRazorPagesMvcBuilderExtensions.AddRazorPagesOptions*> extension method to <xref:Microsoft.Extensions.DependencyInjection.MvcServiceCollectionExtensions.AddMvc*> on the service collection in the `Startup` class.</span></span> <span data-ttu-id="3bc85-130">Die folgenden Beispiele der Konvention werden später in diesem Thema erläutert:</span><span class="sxs-lookup"><span data-stu-id="3bc85-130">The following convention examples are explained later in this topic:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddRazorPages()
        .AddRazorPagesOptions(options =>
        {
            options.Conventions.Add( ... );
            options.Conventions.AddFolderRouteModelConvention(
                "/OtherPages", model => { ... });
            options.Conventions.AddPageRouteModelConvention(
                "/About", model => { ... });
            options.Conventions.AddPageRoute(
                "/Contact", "TheContactPage/{text?}");
            options.Conventions.AddFolderApplicationModelConvention(
                "/OtherPages", model => { ... });
            options.Conventions.AddPageApplicationModelConvention(
                "/About", model => { ... });
            options.Conventions.ConfigureFilter(model => { ... });
            options.Conventions.ConfigureFilter( ... );
        });
}
```

## <a name="route-order"></a><span data-ttu-id="3bc85-131">Routenreihenfolge</span><span class="sxs-lookup"><span data-stu-id="3bc85-131">Route order</span></span>

<span data-ttu-id="3bc85-132">Routen geben eine <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> für die Verarbeitung an (Routenabgleich).</span><span class="sxs-lookup"><span data-stu-id="3bc85-132">Routes specify an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> for processing (route matching).</span></span>

| <span data-ttu-id="3bc85-133">Auftrag</span><span class="sxs-lookup"><span data-stu-id="3bc85-133">Order</span></span>            | <span data-ttu-id="3bc85-134">Verhalten</span><span class="sxs-lookup"><span data-stu-id="3bc85-134">Behavior</span></span> |
| :--------------: | -------- |
| <span data-ttu-id="3bc85-135">-1</span><span class="sxs-lookup"><span data-stu-id="3bc85-135">-1</span></span>               | <span data-ttu-id="3bc85-136">Die Route wird vor anderen Routen verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="3bc85-136">The route is processed before other routes are processed.</span></span> |
| <span data-ttu-id="3bc85-137">0</span><span class="sxs-lookup"><span data-stu-id="3bc85-137">0</span></span>                | <span data-ttu-id="3bc85-138">Die Reihenfolge wurde nicht angegeben (Standardwert).</span><span class="sxs-lookup"><span data-stu-id="3bc85-138">Order isn't specified (default value).</span></span> <span data-ttu-id="3bc85-139">Wenn Sie `Order` (`Order = null`) nicht zuweisen, wird für die Verarbeitung der Route `Order` standardmäßig auf 0 (null) gesetzt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-139">Not assigning `Order` (`Order = null`) defaults the route `Order` to 0 (zero) for processing.</span></span> |
| <span data-ttu-id="3bc85-140">1, 2, &hellip; n</span><span class="sxs-lookup"><span data-stu-id="3bc85-140">1, 2, &hellip; n</span></span> | <span data-ttu-id="3bc85-141">Gibt die Verarbeitungsreihenfolge für die Route an.</span><span class="sxs-lookup"><span data-stu-id="3bc85-141">Specifies the route processing order.</span></span> |

<span data-ttu-id="3bc85-142">Die Routenverarbeitung wird gemäß der Konvention eingerichtet:</span><span class="sxs-lookup"><span data-stu-id="3bc85-142">Route processing is established by convention:</span></span>

* <span data-ttu-id="3bc85-143">Routen werden in sequenzieller Reihenfolge verarbeitet (-1, 0, 1, 2, &hellip; n).</span><span class="sxs-lookup"><span data-stu-id="3bc85-143">Routes are processed in sequential order (-1, 0, 1, 2, &hellip; n).</span></span>
* <span data-ttu-id="3bc85-144">Wenn Routen dieselbe `Order` aufweisen, wird zuerst die spezifischste Route abgeglichen, danach folgen die weniger spezifischen Routen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-144">When routes have the same `Order`, the most specific route is matched first followed by less specific routes.</span></span>
* <span data-ttu-id="3bc85-145">Wenn Routen mit derselben `Order` und derselben Anzahl Parameter mit einer Anforderungs-URL übereinstimmen, werden Routen in der Reihenfolge verarbeitet, in der sie der <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection> hinzugefügt wurden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-145">When routes with the same `Order` and the same number of parameters match a request URL, routes are processed in the order that they're added to the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection>.</span></span>

<span data-ttu-id="3bc85-146">Vermeiden Sie nach Möglichkeit die Abhängigkeit von einer festgelegten Verarbeitungsreihenfolge für Routen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-146">If possible, avoid depending on an established route processing order.</span></span> <span data-ttu-id="3bc85-147">Im Allgemeinen wird beim Routing die richtige Route mittels URL-Zuordnung ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-147">Generally, routing selects the correct route with URL matching.</span></span> <span data-ttu-id="3bc85-148">Wenn Sie zum ordnungsgemäßen Weiterleiten von Anforderungen für die Route `Order`-Eigenschaften festlegen müssen, ist das Routingschema der App für Clients wahrscheinlich irreführend und in Bezug auf die Verwaltung störanfälliger.</span><span class="sxs-lookup"><span data-stu-id="3bc85-148">If you must set route `Order` properties to route requests correctly, the app's routing scheme is probably confusing to clients and fragile to maintain.</span></span> <span data-ttu-id="3bc85-149">Versuchen Sie daher, das Routingschema der App zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-149">Seek to simplify the app's routing scheme.</span></span> <span data-ttu-id="3bc85-150">Bei der Beispiel-App ist eine explizite Verarbeitungsreihenfolge für Routen erforderlich, um mit einer einzigen App verschiedene Routingszenarios veranschaulichen zu können.</span><span class="sxs-lookup"><span data-stu-id="3bc85-150">The sample app requires an explicit route processing order to demonstrate several routing scenarios using a single app.</span></span> <span data-ttu-id="3bc85-151">In Produktions-Apps sollten Sie jedoch nach Möglichkeit eine Festlegung von `Order` für Routen vermeiden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-151">However, you should attempt to avoid the practice of setting route `Order` in production apps.</span></span>

<span data-ttu-id="3bc85-152">Razor Pages-Routing und MVC Controller-Routing verwenden eine gemeinsame Implementierung.</span><span class="sxs-lookup"><span data-stu-id="3bc85-152">Razor Pages routing and MVC controller routing share an implementation.</span></span> <span data-ttu-id="3bc85-153">Informationen zur Reihenfolge von Routen in den MVC-Themen finden Sie unter [Routing zu Controlleraktionen: Ordnen der Attributrouten](xref:mvc/controllers/routing#ordering-attribute-routes).</span><span class="sxs-lookup"><span data-stu-id="3bc85-153">Information on route order in the MVC topics is available at [Routing to controller actions: Ordering attribute routes](xref:mvc/controllers/routing#ordering-attribute-routes).</span></span>

## <a name="model-conventions"></a><span data-ttu-id="3bc85-154">Modellkonventionen</span><span class="sxs-lookup"><span data-stu-id="3bc85-154">Model conventions</span></span>

<span data-ttu-id="3bc85-155">Fügen Sie einen Delegaten für <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> hinzu, um [Modellkonventionen](xref:mvc/controllers/application-model#conventions) hinzuzufügen, die auf Razor Pages anwendbar sind.</span><span class="sxs-lookup"><span data-stu-id="3bc85-155">Add a delegate for <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> to add [model conventions](xref:mvc/controllers/application-model#conventions) that apply to Razor Pages.</span></span>

### <a name="add-a-route-model-convention-to-all-pages"></a><span data-ttu-id="3bc85-156">Hinzufügen einer Routenmodellkonvention zu allen Seiten</span><span class="sxs-lookup"><span data-stu-id="3bc85-156">Add a route model convention to all pages</span></span>

<span data-ttu-id="3bc85-157">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> zum Erstellen und Hinzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> zur Auflistung der Instanzen von <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention>, die während der Erstellung von Seitenroutenmodellen eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-157">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page route model construction.</span></span>

<span data-ttu-id="3bc85-158">Die Beispielanwendung fügt dann zu allen Seiten der App eine `{globalTemplate?}`-Routenvorlage hinzu:</span><span class="sxs-lookup"><span data-stu-id="3bc85-158">The sample app adds a `{globalTemplate?}` route template to all of the pages in the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Conventions/GlobalTemplatePageRouteModelConvention.cs?name=snippet1)]

<span data-ttu-id="3bc85-159">Die Eigenschaft <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> ist für das <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> auf `1` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-159">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `1`.</span></span> <span data-ttu-id="3bc85-160">Dadurch wird das folgende Routenabgleichsverhalten in der Beispiel-App sichergestellt:</span><span class="sxs-lookup"><span data-stu-id="3bc85-160">This ensures the following route matching behavior in the sample app:</span></span>

* <span data-ttu-id="3bc85-161">Eine Routenvorlage für `TheContactPage/{text?}` wird später in diesem Thema hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-161">A route template for `TheContactPage/{text?}` is added later in the topic.</span></span> <span data-ttu-id="3bc85-162">Die Standardreihenfolge der Route für die Kontaktseite lautet `null` (`Order = 0`). Somit wird sie vor der Routenvorlage `{globalTemplate?}` abgeglichen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-162">The Contact Page route has a default order of `null` (`Order = 0`), so it matches before the `{globalTemplate?}` route template.</span></span>
* <span data-ttu-id="3bc85-163">Eine Routenvorlage für `{aboutTemplate?}` wird später in diesem Thema hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-163">An `{aboutTemplate?}` route template is added later in the topic.</span></span> <span data-ttu-id="3bc85-164">Die Vorlage `{aboutTemplate?}` erhält den `Order` von `2`.</span><span class="sxs-lookup"><span data-stu-id="3bc85-164">The `{aboutTemplate?}` template is given an `Order` of `2`.</span></span> <span data-ttu-id="3bc85-165">Wenn die Seite „Info“ unter `/About/RouteDataValue` angefordert wird, wird „RouteDataValue“ in die Vorlage `RouteData.Values["globalTemplate"]` geladen (`Order = 1`) und nicht in `RouteData.Values["aboutTemplate"]` (`Order = 2`), da die Eigenschaft `Order` auf null festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-165">When the About page is requested at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["aboutTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>
* <span data-ttu-id="3bc85-166">Eine Routenvorlage für `{otherPagesTemplate?}` wird später in diesem Thema hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-166">An `{otherPagesTemplate?}` route template is added later in the topic.</span></span> <span data-ttu-id="3bc85-167">Die Vorlage `{otherPagesTemplate?}` erhält den `Order` von `2`.</span><span class="sxs-lookup"><span data-stu-id="3bc85-167">The `{otherPagesTemplate?}` template is given an `Order` of `2`.</span></span> <span data-ttu-id="3bc85-168">Wenn eine Seite im Ordner *Pages/OtherPages* mit einem Routenparameter (z. B. `/OtherPages/Page1/RouteDataValue`) angefordert wird, wird „RouteDataValue“ in die Vorlage `RouteData.Values["globalTemplate"]` geladen (`Order = 1`) und nicht in `RouteData.Values["otherPagesTemplate"]` (`Order = 2`), da die Eigenschaft `Order` auf null festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-168">When any page in the *Pages/OtherPages* folder is requested with a route parameter (for example, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="3bc85-169">Legen Sie die `Order` möglichst nicht fest, sodass `Order = 0` gilt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-169">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="3bc85-170">Verlassen Sie sich bei der Auswahl der richtigen Route auf die Routenplanung.</span><span class="sxs-lookup"><span data-stu-id="3bc85-170">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="3bc85-171">Optionen für Razor Pages, z. B. das Hinzufügen von <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions>, werden hinzugefügt, wenn MVC der Dienstauflistung in `Startup.ConfigureServices` hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="3bc85-171">Razor Pages options, such as adding <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions>, are added when MVC is added to the service collection in `Startup.ConfigureServices`.</span></span> <span data-ttu-id="3bc85-172">In der [Beispiel-App](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/) finden Sie ein Beispiel hierfür.</span><span class="sxs-lookup"><span data-stu-id="3bc85-172">For an example, see the [sample app](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/).</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet1)]

<span data-ttu-id="3bc85-173">Fordern Sie die Seite „Info“ der Beispielanwendung unter `localhost:5000/About/GlobalRouteValue` an, und prüfen Sie das Ergebnis:</span><span class="sxs-lookup"><span data-stu-id="3bc85-173">Request the sample's About page at `localhost:5000/About/GlobalRouteValue` and inspect the result:</span></span>

![Die Seite „Info“ wird mit einem Routensegment von GlobalRouteValue angefordert.](razor-pages-conventions/_static/about-page-global-template.png)

### <a name="add-an-app-model-convention-to-all-pages"></a><span data-ttu-id="3bc85-176">Hinzufügen einer App-Modellkonvention zu allen Seiten</span><span class="sxs-lookup"><span data-stu-id="3bc85-176">Add an app model convention to all pages</span></span>

<span data-ttu-id="3bc85-177">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> zum Erstellen und Hinzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> zur Auflistung der Instanzen von <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention>, die während der Erstellung von Seitenanwendungsmodellen eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-177">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page app model construction.</span></span>

<span data-ttu-id="3bc85-178">Die Beispielanwendung enthält eine `AddHeaderAttribute`-Klasse, damit das Verwenden dieser und anderer Konventionen weiter unten in diesem Thema gezeigt werden kann.</span><span class="sxs-lookup"><span data-stu-id="3bc85-178">To demonstrate this and other conventions later in the topic, the sample app includes an `AddHeaderAttribute` class.</span></span> <span data-ttu-id="3bc85-179">Der Klassenkonstruktor akzeptiert eine `name`-Zeichenfolge und ein `values`-Zeichenfolgenarray.</span><span class="sxs-lookup"><span data-stu-id="3bc85-179">The class constructor accepts a `name` string and a `values` string array.</span></span> <span data-ttu-id="3bc85-180">Diese Werte werden in seiner `OnResultExecuting`-Methode verwendet, um einen Antwortheader einzurichten.</span><span class="sxs-lookup"><span data-stu-id="3bc85-180">These values are used in its `OnResultExecuting` method to set a response header.</span></span> <span data-ttu-id="3bc85-181">Die Klasse wird im Abschnitt [Seitenmodellaktionskonventionen](#page-model-action-conventions) weiter unten in diesem Artikel erläutert.</span><span class="sxs-lookup"><span data-stu-id="3bc85-181">The full class is shown in the [Page model action conventions](#page-model-action-conventions) section later in the topic.</span></span>

<span data-ttu-id="3bc85-182">Die Beispielanwendung verwendet die Klasse `AddHeaderAttribute`, um den Header `GlobalHeader` zu allen Seiten der Anwendung hinzuzufügen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-182">The sample app uses the `AddHeaderAttribute` class to add a header, `GlobalHeader`, to all of the pages in the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Conventions/GlobalHeaderPageApplicationModelConvention.cs?name=snippet1)]

<span data-ttu-id="3bc85-183">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="3bc85-183">*Startup.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet2)]

<span data-ttu-id="3bc85-184">Fordern Sie die Seite „Info“ der Beispielanwendung unter `localhost:5000/About` an, und überprüfen Sie die Header, um das Ergebnis zu sehen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-184">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Antwortheader der Seite „Info“ zeigen an, dass „GlobalHeader“ hinzugefügt wurde.](razor-pages-conventions/_static/about-page-global-header.png)

### <a name="add-a-handler-model-convention-to-all-pages"></a><span data-ttu-id="3bc85-186">Hinzufügen einer Handlermodellkonvention zu allen Seiten</span><span class="sxs-lookup"><span data-stu-id="3bc85-186">Add a handler model convention to all pages</span></span>

<span data-ttu-id="3bc85-187">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> zum Erstellen und Hinzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageHandlerModelConvention> zur Auflistung der Instanzen von <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention>, die während der Erstellung von Seitenhandlermodellen eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-187">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageHandlerModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page handler model construction.</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Conventions/GlobalPageHandlerModelConvention.cs?name=snippet1)]

<span data-ttu-id="3bc85-188">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="3bc85-188">*Startup.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet10)]

## <a name="page-route-action-conventions"></a><span data-ttu-id="3bc85-189">Konventionen für Seitenroutenaktionen</span><span class="sxs-lookup"><span data-stu-id="3bc85-189">Page route action conventions</span></span>

<span data-ttu-id="3bc85-190">Der Standardanbieter für Routenmodelle, der von <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelProvider> abgeleitet wird, ruft Konventionen auf, die entwickelt wurden, um Erweiterungspunkte zum Konfigurieren von Seitenrouten bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-190">The default route model provider that derives from <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelProvider> invokes conventions which are designed to provide extensibility points for configuring page routes.</span></span>

### <a name="folder-route-model-convention"></a><span data-ttu-id="3bc85-191">Ordnerroutenmodellkonvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-191">Folder route model convention</span></span>

<span data-ttu-id="3bc85-192">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> zum Erstellen und Hinzuzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention>, die eine Aktion für <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> für alle Seiten im angegebenen Ordner aufruft.</span><span class="sxs-lookup"><span data-stu-id="3bc85-192">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> for all of the pages under the specified folder.</span></span>

<span data-ttu-id="3bc85-193">Die Beispielanwendung verwendet <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*>, um eine `{otherPagesTemplate?}`-Routenvorlage zu den Seiten im Ordner *OtherPages* hinzuzufügen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-193">The sample app uses <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> to add an `{otherPagesTemplate?}` route template to the pages in the *OtherPages* folder:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet3)]

<span data-ttu-id="3bc85-194">Die Eigenschaft <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> ist für das <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> auf `2` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-194">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `2`.</span></span> <span data-ttu-id="3bc85-195">Dadurch wird sichergestellt, dass die Vorlage für `{globalTemplate?}`, die weiter oben in diesem Thema für `1` festgelegt wurde, in Bezug auf die erste Position für einen Routendatenwert vorgezogen wird, wenn nur ein einziger Routenwert angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-195">This ensures that the template for `{globalTemplate?}` (set earlier in the topic to `1`) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="3bc85-196">Wenn eine Seite im Ordner *Pages/OtherPages* mit einem Routenparameterwert (z. B. `/OtherPages/Page1/RouteDataValue`) angefordert wird, wird „RouteDataValue“ in die Vorlage `RouteData.Values["globalTemplate"]` geladen (`Order = 1`) und nicht in `RouteData.Values["otherPagesTemplate"]` (`Order = 2`), da die Eigenschaft `Order` auf null festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-196">If a page in the *Pages/OtherPages* folder is requested with a route parameter value (for example, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="3bc85-197">Legen Sie die `Order` möglichst nicht fest, sodass `Order = 0` gilt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-197">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="3bc85-198">Verlassen Sie sich bei der Auswahl der richtigen Route auf die Routenplanung.</span><span class="sxs-lookup"><span data-stu-id="3bc85-198">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="3bc85-199">Fordern Sie die Seite „Seite1“ der Beispielanwendung unter `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` an, und prüfen Sie das Ergebnis:</span><span class="sxs-lookup"><span data-stu-id="3bc85-199">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` and inspect the result:</span></span>

![Seite1 aus dem Ordner „OtherPages“ wird mit einem Routensegment von GlobalRouteValue und OtherPagesRouteValue angefordert.](razor-pages-conventions/_static/otherpages-page1-global-and-otherpages-templates.png)

### <a name="page-route-model-convention"></a><span data-ttu-id="3bc85-202">Seitenroutenmodellkonvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-202">Page route model convention</span></span>

<span data-ttu-id="3bc85-203">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageRouteModelConvention*> zum Erstellen und Hinzuzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention>, die eine Aktion für das <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> für die Seite mit dem angegebenen Namen aufruft.</span><span class="sxs-lookup"><span data-stu-id="3bc85-203">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageRouteModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> for the page with the specified name.</span></span>

<span data-ttu-id="3bc85-204">Die Beispielanwendung verwendet `AddPageRouteModelConvention`, um eine `{aboutTemplate?}`-Routenvorlage zu der Seite „Info“ hinzuzufügen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-204">The sample app uses `AddPageRouteModelConvention` to add an `{aboutTemplate?}` route template to the About page:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet4)]

<span data-ttu-id="3bc85-205">Die Eigenschaft <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> ist für das <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> auf `2` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-205">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `2`.</span></span> <span data-ttu-id="3bc85-206">Dadurch wird sichergestellt, dass die Vorlage für `{globalTemplate?}`, die weiter oben in diesem Thema für `1` festgelegt wurde, in Bezug auf die erste Position für einen Routendatenwert vorgezogen wird, wenn nur ein einziger Routenwert angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-206">This ensures that the template for `{globalTemplate?}` (set earlier in the topic to `1`) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="3bc85-207">Wenn die Seite „Info“ mit einem Routenparameterwert unter `/About/RouteDataValue` angefordert wird, wird „RouteDataValue“ in die Vorlage `RouteData.Values["globalTemplate"]` geladen (`Order = 1`) und nicht in `RouteData.Values["aboutTemplate"]` (`Order = 2`), da die Eigenschaft `Order` auf null festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-207">If the About page is requested with a route parameter value at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["aboutTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="3bc85-208">Legen Sie die `Order` möglichst nicht fest, sodass `Order = 0` gilt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-208">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="3bc85-209">Verlassen Sie sich bei der Auswahl der richtigen Route auf die Routenplanung.</span><span class="sxs-lookup"><span data-stu-id="3bc85-209">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="3bc85-210">Fordern Sie die Seite „Info“ der Beispielanwendung unter `localhost:5000/About/GlobalRouteValue/AboutRouteValue` an, und prüfen Sie das Ergebnis:</span><span class="sxs-lookup"><span data-stu-id="3bc85-210">Request the sample's About page at `localhost:5000/About/GlobalRouteValue/AboutRouteValue` and inspect the result:</span></span>

![Die Seite „Info“ wird mit Routensegmenten für GlobalRouteValue und AboutRouteValue angefordert.](razor-pages-conventions/_static/about-page-global-and-about-templates.png)

## <a name="use-a-parameter-transformer-to-customize-page-routes"></a><span data-ttu-id="3bc85-213">Verwenden eines Parametertransformators zum Anpassen von Seitenrouten</span><span class="sxs-lookup"><span data-stu-id="3bc85-213">Use a parameter transformer to customize page routes</span></span>

<span data-ttu-id="3bc85-214">Von ASP.NET Core generierte Seitenrouten können mit einem Parametertransformator angepasst werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-214">Page routes generated by ASP.NET Core can be customized using a parameter transformer.</span></span> <span data-ttu-id="3bc85-215">Ein Parametertransformator implementiert `IOutboundParameterTransformer` und wandelt den Wert der Parameter um.</span><span class="sxs-lookup"><span data-stu-id="3bc85-215">A parameter transformer implements `IOutboundParameterTransformer` and transforms the value of parameters.</span></span> <span data-ttu-id="3bc85-216">Beispielsweise ändert ein benutzerdefinierter `SlugifyParameterTransformer`-Parametertransformator den Routenwert `SubscriptionManagement` in `subscription-management`.</span><span class="sxs-lookup"><span data-stu-id="3bc85-216">For example, a custom `SlugifyParameterTransformer` parameter transformer changes the `SubscriptionManagement` route value to `subscription-management`.</span></span>

<span data-ttu-id="3bc85-217">Mit der Seitenroutenmodellkonvention `PageRouteTransformerConvention` wird ein Parametertransformator auf die Ordner- und Dateinamenssegmente von automatisch generierten Seitenrouten in einer App angewendet.</span><span class="sxs-lookup"><span data-stu-id="3bc85-217">The `PageRouteTransformerConvention` page route model convention applies a parameter transformer to the folder and file name segments of automatically generated page routes in an app.</span></span> <span data-ttu-id="3bc85-218">Für die Razor Pages-Datei unter */Pages/SubscriptionManagement/ViewAll.cshtml* wird die Route beispielsweise von `/SubscriptionManagement/ViewAll` in `/subscription-management/view-all` umgeschrieben.</span><span class="sxs-lookup"><span data-stu-id="3bc85-218">For example, the Razor Pages file at */Pages/SubscriptionManagement/ViewAll.cshtml* would have its route rewritten from `/SubscriptionManagement/ViewAll` to `/subscription-management/view-all`.</span></span>

<span data-ttu-id="3bc85-219">Mit `PageRouteTransformerConvention` werden nur die automatisch generierten Segmente einer Seitenroute transformiert, die aus dem Ordner- und Dateinamen von Razor Pages stammen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-219">`PageRouteTransformerConvention` only transforms the automatically generated segments of a page route that come from the Razor Pages folder and file name.</span></span> <span data-ttu-id="3bc85-220">Mit der `@page`-Anweisung hinzugefügte Routensegmente werden nicht transformiert.</span><span class="sxs-lookup"><span data-stu-id="3bc85-220">It doesn't transform route segments added with the `@page` directive.</span></span> <span data-ttu-id="3bc85-221">Auch durch <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*> hinzugefügte Routen werden mit dieser Konvention nicht transformiert.</span><span class="sxs-lookup"><span data-stu-id="3bc85-221">The convention also doesn't transform routes added by <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*>.</span></span>

<span data-ttu-id="3bc85-222">Die `PageRouteTransformerConvention` wird als Option in `Startup.ConfigureServices` registriert:</span><span class="sxs-lookup"><span data-stu-id="3bc85-222">The `PageRouteTransformerConvention` is registered as an option in `Startup.ConfigureServices`:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddRazorPages()
        .AddRazorPagesOptions(options =>
        {
            options.Conventions.Add(
                new PageRouteTransformerConvention(
                    new SlugifyParameterTransformer()));
        });
}

public class SlugifyParameterTransformer : IOutboundParameterTransformer
{
    public string TransformOutbound(object value)
    {
        if (value == null) { return null; }

        // Slugify value
        return Regex.Replace(value.ToString(), "([a-z])([A-Z])", "$1-$2").ToLower();
    }
}
```

## <a name="configure-a-page-route"></a><span data-ttu-id="3bc85-223">Konfigurieren einer Seitenroute</span><span class="sxs-lookup"><span data-stu-id="3bc85-223">Configure a page route</span></span>

<span data-ttu-id="3bc85-224">Konfigurieren Sie mithilfe von <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*> eine Route zu einer Seite am angegebenen Seitenpfad.</span><span class="sxs-lookup"><span data-stu-id="3bc85-224">Use <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*> to configure a route to a page at the specified page path.</span></span> <span data-ttu-id="3bc85-225">Generierte Links, die auf die Seite verweisen, verwenden die von Ihnen angegebene Route.</span><span class="sxs-lookup"><span data-stu-id="3bc85-225">Generated links to the page use your specified route.</span></span> <span data-ttu-id="3bc85-226">`AddPageRoute` verwendet die `AddPageRouteModelConvention` zum Aufbauen der Route.</span><span class="sxs-lookup"><span data-stu-id="3bc85-226">`AddPageRoute` uses `AddPageRouteModelConvention` to establish the route.</span></span>

<span data-ttu-id="3bc85-227">Die Beispielanwendung erstellt für *Contact.cshtml* eine Route zur Seite `/TheContactPage`:</span><span class="sxs-lookup"><span data-stu-id="3bc85-227">The sample app creates a route to `/TheContactPage` for *Contact.cshtml*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet5)]

<span data-ttu-id="3bc85-228">Die Seite „Kontakt“ kann auch unter `/Contact` über ihre Standardroute erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-228">The Contact page can also be reached at `/Contact` via its default route.</span></span>

<span data-ttu-id="3bc85-229">Die benutzerdefinierte Route der Beispielanwendung, die zur Seite „Kontakt“ führt, ermöglicht das Verwenden eines optionalen `text`-Routensegments (`{text?}`).</span><span class="sxs-lookup"><span data-stu-id="3bc85-229">The sample app's custom route to the Contact page allows for an optional `text` route segment (`{text?}`).</span></span> <span data-ttu-id="3bc85-230">Die Seite enthält dieses optionale Segment auch in ihrer `@page`-Anweisung, für den Fall, dass der Besucher über die `/Contact`-Route auf die Seite zugreift:</span><span class="sxs-lookup"><span data-stu-id="3bc85-230">The page also includes this optional segment in its `@page` directive in case the visitor accesses the page at its `/Contact` route:</span></span>

[!code-cshtml[](razor-pages-conventions/samples/3.x/SampleApp/Pages/Contact.cshtml?highlight=1)]

<span data-ttu-id="3bc85-231">Beachten Sie, dass die URL, die für den Link **Kontakt** in der gerenderten Seite generiert wurde, die aktualisierte Route widerspiegelt:</span><span class="sxs-lookup"><span data-stu-id="3bc85-231">Note that the URL generated for the **Contact** link in the rendered page reflects the updated route:</span></span>

![Kontaktlink der Beispielanwendung in der Navigationsleiste](razor-pages-conventions/_static/contact-link.png)

![Beim Überprüfen des Kontaktlinks in der gerenderten HTML zeigt sich, dass das HREF-Attribut auf „/TheContactPage“ festgelegt wurde.](razor-pages-conventions/_static/contact-link-source.png)

<span data-ttu-id="3bc85-234">Sie können die Kontaktseite entweder über deren übliche Route, `/Contact`, oder über die benutzerdefinierte Route, `/TheContactPage`, besuchen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-234">Visit the Contact page at either its ordinary route, `/Contact`, or the custom route, `/TheContactPage`.</span></span> <span data-ttu-id="3bc85-235">Wenn Sie ein zusätzliches `text`-Routensegment bereitstellen, wird dieses HTML-codierte Segment auf der Seite angezeigt:</span><span class="sxs-lookup"><span data-stu-id="3bc85-235">If you supply an additional `text` route segment, the page shows the HTML-encoded segment that you provide:</span></span>

![Beispiel für das Bereitstellen eines optionalen „Text“-Routensegments mit „TextValue“ in der URL in der Ansicht des Microsoft Edge-Browsers](razor-pages-conventions/_static/route-segment-with-custom-route.png)

## <a name="page-model-action-conventions"></a><span data-ttu-id="3bc85-238">Konventionen für Seitenmodellaktionen</span><span class="sxs-lookup"><span data-stu-id="3bc85-238">Page model action conventions</span></span>

<span data-ttu-id="3bc85-239">Der Standardanbieter für Seitenmodelle, der <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelProvider> implementiert, ruft Konventionen auf, die entwickelt wurden, um Erweiterungspunkte zum Konfigurieren von Seitenmodellen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-239">The default page model provider that implements <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelProvider> invokes conventions which are designed to provide extensibility points for configuring page models.</span></span> <span data-ttu-id="3bc85-240">Diese Konventionen sind beim Erstellen und Ändern von Seitenermittlungs- und Verarbeitungsszenarios hilfreich.</span><span class="sxs-lookup"><span data-stu-id="3bc85-240">These conventions are useful when building and modifying page discovery and processing scenarios.</span></span>

<span data-ttu-id="3bc85-241">In den Beispielen in diesem Abschnitt verwendet die Beispielanwendung eine `AddHeaderAttribute`-Klasse, also ein <xref:Microsoft.AspNetCore.Mvc.Filters.ResultFilterAttribute>, das einen Antwortheader verwendet:</span><span class="sxs-lookup"><span data-stu-id="3bc85-241">For the examples in this section, the sample app uses an `AddHeaderAttribute` class, which is a <xref:Microsoft.AspNetCore.Mvc.Filters.ResultFilterAttribute>, that applies a response header:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Filters/AddHeader.cs?name=snippet1)]

<span data-ttu-id="3bc85-242">Das Beispiel veranschaulicht mithilfe von Konventionen, wie das Attribut auf alle Seiten in einem Ordner und auf eine Einzelseite angewendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="3bc85-242">Using conventions, the sample demonstrates how to apply the attribute to all of the pages in a folder and to a single page.</span></span>

<span data-ttu-id="3bc85-243">**Ordner-App-Modellkonvention**</span><span class="sxs-lookup"><span data-stu-id="3bc85-243">**Folder app model convention**</span></span>

<span data-ttu-id="3bc85-244">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderApplicationModelConvention*> zum Erstellen und Hinzuzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention>, die eine Aktion für <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel>-Instanzen für alle Seiten im angegebenen Ordner aufruft.</span><span class="sxs-lookup"><span data-stu-id="3bc85-244">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderApplicationModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> that invokes an action on <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> instances for all pages under the specified folder.</span></span>

<span data-ttu-id="3bc85-245">Im Beispiel wird die Verwendung der `AddFolderApplicationModelConvention` durch Hinzufügen eines Headers, `OtherPagesHeader`, zu den Seiten im Ordner *OtherPages* der Anwendung veranschaulicht:</span><span class="sxs-lookup"><span data-stu-id="3bc85-245">The sample demonstrates the use of `AddFolderApplicationModelConvention` by adding a header, `OtherPagesHeader`, to the pages inside the *OtherPages* folder of the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet6)]

<span data-ttu-id="3bc85-246">Fordern Sie die Seite „Seite1“ der Beispielanwendung unter `localhost:5000/OtherPages/Page1` an, und prüfen Sie die Header, um das Ergebnis zu sehen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-246">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1` and inspect the headers to view the result:</span></span>

![Antwortheader der Seite „OtherPages/Seite1“ zeigt, dass der OtherPagesHeader hinzugefügt wurde.](razor-pages-conventions/_static/page1-otherpages-header.png)

<span data-ttu-id="3bc85-248">**Seiten-App-Modellkonvention**</span><span class="sxs-lookup"><span data-stu-id="3bc85-248">**Page app model convention**</span></span>

<span data-ttu-id="3bc85-249">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageApplicationModelConvention*> zum Erstellen und Hinzuzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention>, die eine Aktion für das <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> für die Seite mit dem angegebenen Namen aufruft.</span><span class="sxs-lookup"><span data-stu-id="3bc85-249">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageApplicationModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> for the page with the specified name.</span></span>

<span data-ttu-id="3bc85-250">Im Beispiel wird das Verwenden von `AddPageApplicationModelConvention` durch Hinzufügen eines Headers, `AboutHeader`, auf der Seite „Info“ veranschaulicht:</span><span class="sxs-lookup"><span data-stu-id="3bc85-250">The sample demonstrates the use of `AddPageApplicationModelConvention` by adding a header, `AboutHeader`, to the About page:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet7)]

<span data-ttu-id="3bc85-251">Fordern Sie die Seite „Info“ der Beispielanwendung unter `localhost:5000/About` an, und überprüfen Sie die Header, um das Ergebnis zu sehen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-251">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Antwortheader der Seite „Info“ zeigen, dass AboutHeader hinzugefügt wurde.](razor-pages-conventions/_static/about-page-about-header.png)

<span data-ttu-id="3bc85-253">**Konfigurieren eines Filters**</span><span class="sxs-lookup"><span data-stu-id="3bc85-253">**Configure a filter**</span></span>

<span data-ttu-id="3bc85-254">Der angegebene Filter, der angewendet werden soll, wird mit <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="3bc85-254"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> configures the specified filter to apply.</span></span> <span data-ttu-id="3bc85-255">Sie können Filterklassen selbst implementieren. In der Beispielanwendung wird jedoch gezeigt, wie Sie einen Filter in einen Lambdaausdruck implementieren. Dieser wird dann im Hintergrund als Zuordnungsinstanz implementiert, die einen Filter zurückgibt:</span><span class="sxs-lookup"><span data-stu-id="3bc85-255">You can implement a filter class, but the sample app shows how to implement a filter in a lambda expression, which is implemented behind-the-scenes as a factory that returns a filter:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet8)]

<span data-ttu-id="3bc85-256">Das Seiten-App-Modell wird verwendet, um den relativen Pfad für Segmente zu überprüfen, die zur Seite „Seite2“ im Ordner *OtherPages* führen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-256">The page app model is used to check the relative path for segments that lead to the Page2 page in the *OtherPages* folder.</span></span> <span data-ttu-id="3bc85-257">Wenn die Bedingung erfüllt ist, wird ein Header hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-257">If the condition passes, a header is added.</span></span> <span data-ttu-id="3bc85-258">Wenn dies nicht der Fall ist, wird der `EmptyFilter` angewendet.</span><span class="sxs-lookup"><span data-stu-id="3bc85-258">If not, the `EmptyFilter` is applied.</span></span>

<span data-ttu-id="3bc85-259">`EmptyFilter` ist ein [Aktionsfilter](xref:mvc/controllers/filters#action-filters).</span><span class="sxs-lookup"><span data-stu-id="3bc85-259">`EmptyFilter` is an [Action filter](xref:mvc/controllers/filters#action-filters).</span></span> <span data-ttu-id="3bc85-260">Wenn der Pfad `OtherPages/Page2` nicht enthält, hat der `EmptyFilter`, wie vorgesehen, keine Auswirkung, da Aktionsfilter von Razor Pages ignoriert werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-260">Since Action filters are ignored by Razor Pages, the `EmptyFilter` has no effect as intended if the path doesn't contain `OtherPages/Page2`.</span></span>

<span data-ttu-id="3bc85-261">Fordern Sie die Seite „Seite2“ der Beispielanwendung unter `localhost:5000/OtherPages/Page2` an, und prüfen Sie die Header, um das Ergebnis zu sehen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-261">Request the sample's Page2 page at `localhost:5000/OtherPages/Page2` and inspect the headers to view the result:</span></span>

![Der Header „OtherPagesPage2Header“ wird zur Antwort für „Seite2“ hinzugefügt.](razor-pages-conventions/_static/page2-filter-header.png)

<span data-ttu-id="3bc85-263">**Konfigurieren einer Filterzuordnungsinstanz**</span><span class="sxs-lookup"><span data-stu-id="3bc85-263">**Configure a filter factory**</span></span>

<span data-ttu-id="3bc85-264">Mit <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> wird die angegebene Zuordnungsinstanz so konfiguriert, dass sie [Filter](xref:mvc/controllers/filters) auf alle Razor Pages anwendet.</span><span class="sxs-lookup"><span data-stu-id="3bc85-264"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> configures the specified factory to apply [filters](xref:mvc/controllers/filters) to all Razor Pages.</span></span>

<span data-ttu-id="3bc85-265">Die Beispielanwendung bietet Ihnen die Möglichkeit des beispielhaften Verwendens einer [Filterzuordnungsinstanz](xref:mvc/controllers/filters#ifilterfactory) durch Hinzufügen des Headers `FilterFactoryHeader` zu den Seiten der Anwendung, der zwei Werte besitzt:</span><span class="sxs-lookup"><span data-stu-id="3bc85-265">The sample app provides an example of using a [filter factory](xref:mvc/controllers/filters#ifilterfactory) by adding a header, `FilterFactoryHeader`, with two values to the app's pages:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet9)]

<span data-ttu-id="3bc85-266">*AddHeaderWithFactory.cs*:</span><span class="sxs-lookup"><span data-stu-id="3bc85-266">*AddHeaderWithFactory.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Factories/AddHeaderWithFactory.cs?name=snippet1)]

<span data-ttu-id="3bc85-267">Fordern Sie die Seite „Info“ der Beispielanwendung unter `localhost:5000/About` an, und überprüfen Sie die Header, um das Ergebnis zu sehen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-267">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Die Antwortheader der Seite „Info“ zeigen, dass zwei Header des Typs „FilterFactoryHeader“ hinzugefügt wurden.](razor-pages-conventions/_static/about-page-filter-factory-header.png)

## <a name="mvc-filters-and-the-page-filter-ipagefilter"></a><span data-ttu-id="3bc85-269">Die MVC-Filter und der Seitenfilter (IPageFilter)</span><span class="sxs-lookup"><span data-stu-id="3bc85-269">MVC Filters and the Page filter (IPageFilter)</span></span>

<span data-ttu-id="3bc85-270">MVC-[Aktionsfilter](xref:mvc/controllers/filters#action-filters) werden von Razor Pages ignoriert, da diese Handlermethoden verwenden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-270">MVC [Action filters](xref:mvc/controllers/filters#action-filters) are ignored by Razor Pages, since Razor Pages use handler methods.</span></span> <span data-ttu-id="3bc85-271">Darüber hinaus stehen die folgenden MVC-Filtertypen zur Verfügung: [Autorisierung](xref:mvc/controllers/filters#authorization-filters), [Ausnahme](xref:mvc/controllers/filters#exception-filters), [Ressource](xref:mvc/controllers/filters#resource-filters) und [Ergebnis](xref:mvc/controllers/filters#result-filters).</span><span class="sxs-lookup"><span data-stu-id="3bc85-271">Other types of MVC filters are available for you to use: [Authorization](xref:mvc/controllers/filters#authorization-filters), [Exception](xref:mvc/controllers/filters#exception-filters), [Resource](xref:mvc/controllers/filters#resource-filters), and [Result](xref:mvc/controllers/filters#result-filters).</span></span> <span data-ttu-id="3bc85-272">Weitere Informationen finden Sie im Thema [Filter](xref:mvc/controllers/filters).</span><span class="sxs-lookup"><span data-stu-id="3bc85-272">For more information, see the [Filters](xref:mvc/controllers/filters) topic.</span></span>

<span data-ttu-id="3bc85-273">Der Seitenfilter (<xref:Microsoft.AspNetCore.Mvc.Filters.IPageFilter>) ist ein Filter, der auf Razor Pages anwendbar ist.</span><span class="sxs-lookup"><span data-stu-id="3bc85-273">The Page filter (<xref:Microsoft.AspNetCore.Mvc.Filters.IPageFilter>) is a filter that applies to Razor Pages.</span></span> <span data-ttu-id="3bc85-274">Weitere Informationen finden Sie unter [Filtermethoden für Razor-Seiten](xref:razor-pages/filter).</span><span class="sxs-lookup"><span data-stu-id="3bc85-274">For more information, see [Filter methods for Razor Pages](xref:razor-pages/filter).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="3bc85-275">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="3bc85-275">Additional resources</span></span>

* <xref:security/authorization/razor-pages-authorization>
* <xref:mvc/controllers/areas#areas-with-razor-pages>

::: moniker-end

::: moniker range="= aspnetcore-2.2"

<span data-ttu-id="3bc85-276">Erfahren Sie, wie Sie in Apps für Razor-Seiten mithilfe von [Konventionen für Seitenrouten und App-Modellanbieter](xref:mvc/controllers/application-model#conventions) das Seitenrouting, die Ermittlung und die Verarbeitung steuern können.</span><span class="sxs-lookup"><span data-stu-id="3bc85-276">Learn how to use page [route and app model provider conventions](xref:mvc/controllers/application-model#conventions) to control page routing, discovery, and processing in Razor Pages apps.</span></span>

<span data-ttu-id="3bc85-277">Wenn Sie für einzelne Seiten benutzerdefinierte Seitenrouten konfigurieren müssen, sollten Sie das Routing zu den Seiten mithilfe der [AddPageRoute-Konvention](#configure-a-page-route) konfigurieren, die weiter unten in diesem Artikel beschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="3bc85-277">When you need to configure custom page routes for individual pages, configure routing to pages with the [AddPageRoute convention](#configure-a-page-route) described later in this topic.</span></span>

<span data-ttu-id="3bc85-278">Um eine Seitenroute anzugeben oder einer Route Segmente oder Parameter hinzuzufügen, verwenden Sie die Anweisung `@page` der Seite.</span><span class="sxs-lookup"><span data-stu-id="3bc85-278">To specify a page route, add route segments, or add parameters to a route, use the page's `@page` directive.</span></span> <span data-ttu-id="3bc85-279">Weitere Informationen finden Sie unter [Benutzerdefinierte Routen](xref:razor-pages/index#custom-routes).</span><span class="sxs-lookup"><span data-stu-id="3bc85-279">For more information, see [Custom routes](xref:razor-pages/index#custom-routes).</span></span>

<span data-ttu-id="3bc85-280">Es gibt reservierte Wörter, die nicht als Routensegmente oder Parameternamen verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="3bc85-280">There are reserved words that can't be used as route segments or parameter names.</span></span> <span data-ttu-id="3bc85-281">Weitere Informationen finden Sie unter [Routing: Reservierte Routingnamen](xref:fundamentals/routing#reserved-routing-names).</span><span class="sxs-lookup"><span data-stu-id="3bc85-281">For more information, see [Routing: Reserved routing names](xref:fundamentals/routing#reserved-routing-names).</span></span>

<span data-ttu-id="3bc85-282">[Anzeigen oder Herunterladen von Beispielcode](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/) ([Vorgehensweise zum Herunterladen](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="3bc85-282">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/) ([how to download](xref:index#how-to-download-a-sample))</span></span>

| <span data-ttu-id="3bc85-283">Szenario</span><span class="sxs-lookup"><span data-stu-id="3bc85-283">Scenario</span></span> | <span data-ttu-id="3bc85-284">Dieses Beispiel veranschaulicht Folgendes:</span><span class="sxs-lookup"><span data-stu-id="3bc85-284">The sample demonstrates ...</span></span> |
| -------- | --------------------------- |
| [<span data-ttu-id="3bc85-285">Model conventions (Modellkonventionen)</span><span class="sxs-lookup"><span data-stu-id="3bc85-285">Model conventions</span></span>](#model-conventions)<br><br><span data-ttu-id="3bc85-286">Conventions.Add</span><span class="sxs-lookup"><span data-stu-id="3bc85-286">Conventions.Add</span></span><ul><li><span data-ttu-id="3bc85-287">IPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-287">IPageRouteModelConvention</span></span></li><li><span data-ttu-id="3bc85-288">IPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-288">IPageApplicationModelConvention</span></span></li><li><span data-ttu-id="3bc85-289">IPageHandlerModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-289">IPageHandlerModelConvention</span></span></li></ul> | <span data-ttu-id="3bc85-290">Das Hinzufügen einer Routenvorlage und eines Headers zu den Seiten einer App</span><span class="sxs-lookup"><span data-stu-id="3bc85-290">Add a route template and header to an app's pages.</span></span> |
| [<span data-ttu-id="3bc85-291">Konventionen für Seitenroutenaktionen</span><span class="sxs-lookup"><span data-stu-id="3bc85-291">Page route action conventions</span></span>](#page-route-action-conventions)<ul><li><span data-ttu-id="3bc85-292">AddFolderRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-292">AddFolderRouteModelConvention</span></span></li><li><span data-ttu-id="3bc85-293">AddPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-293">AddPageRouteModelConvention</span></span></li><li><span data-ttu-id="3bc85-294">AddPageRoute</span><span class="sxs-lookup"><span data-stu-id="3bc85-294">AddPageRoute</span></span></li></ul> | <span data-ttu-id="3bc85-295">Das Hinzufügen einer Routenvorlage zu Seiten in einem Ordner und zu einer Einzelseite</span><span class="sxs-lookup"><span data-stu-id="3bc85-295">Add a route template to pages in a folder and to a single page.</span></span> |
| [<span data-ttu-id="3bc85-296">Konventionen für Seitenmodellaktionen</span><span class="sxs-lookup"><span data-stu-id="3bc85-296">Page model action conventions</span></span>](#page-model-action-conventions)<ul><li><span data-ttu-id="3bc85-297">AddFolderApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-297">AddFolderApplicationModelConvention</span></span></li><li><span data-ttu-id="3bc85-298">AddPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-298">AddPageApplicationModelConvention</span></span></li><li><span data-ttu-id="3bc85-299">ConfigureFilter (Filterklasse, Lambdaausdruck oder Filterzuordnungsinstanz)</span><span class="sxs-lookup"><span data-stu-id="3bc85-299">ConfigureFilter (filter class, lambda expression, or filter factory)</span></span></li></ul> | <span data-ttu-id="3bc85-300">Das Hinzufügen eines Headers zu Seiten in einem Ordner, das Hinzufügen eines Headers zu einer einzelnen Seite und das Konfigurieren einer [Filter-Factoy](xref:mvc/controllers/filters#ifilterfactory) zum Hinzufügen eines Headers zu den Seiten einer App.</span><span class="sxs-lookup"><span data-stu-id="3bc85-300">Add a header to pages in a folder, add a header to a single page, and configure a [filter factory](xref:mvc/controllers/filters#ifilterfactory) to add a header to an app's pages.</span></span> |

<span data-ttu-id="3bc85-301">Konventionen für Razor Pages werden <xref:Microsoft.Extensions.DependencyInjection.MvcServiceCollectionExtensions.AddMvc*> mithilfe der Erweiterungsmethode <xref:Microsoft.Extensions.DependencyInjection.MvcRazorPagesMvcBuilderExtensions.AddRazorPagesOptions*> unter der Dienstklasse in der Klasse `Startup` hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-301">Razor Pages conventions are added and configured using the <xref:Microsoft.Extensions.DependencyInjection.MvcRazorPagesMvcBuilderExtensions.AddRazorPagesOptions*> extension method to <xref:Microsoft.Extensions.DependencyInjection.MvcServiceCollectionExtensions.AddMvc*> on the service collection in the `Startup` class.</span></span> <span data-ttu-id="3bc85-302">Die folgenden Beispiele der Konvention werden später in diesem Thema erläutert:</span><span class="sxs-lookup"><span data-stu-id="3bc85-302">The following convention examples are explained later in this topic:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddRazorPagesOptions(options =>
        {
            options.Conventions.Add( ... );
            options.Conventions.AddFolderRouteModelConvention(
                "/OtherPages", model => { ... });
            options.Conventions.AddPageRouteModelConvention(
                "/About", model => { ... });
            options.Conventions.AddPageRoute(
                "/Contact", "TheContactPage/{text?}");
            options.Conventions.AddFolderApplicationModelConvention(
                "/OtherPages", model => { ... });
            options.Conventions.AddPageApplicationModelConvention(
                "/About", model => { ... });
            options.Conventions.ConfigureFilter(model => { ... });
            options.Conventions.ConfigureFilter( ... );
        });
}
```

## <a name="route-order"></a><span data-ttu-id="3bc85-303">Routenreihenfolge</span><span class="sxs-lookup"><span data-stu-id="3bc85-303">Route order</span></span>

<span data-ttu-id="3bc85-304">Routen geben eine <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> für die Verarbeitung an (Routenabgleich).</span><span class="sxs-lookup"><span data-stu-id="3bc85-304">Routes specify an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> for processing (route matching).</span></span>

| <span data-ttu-id="3bc85-305">Auftrag</span><span class="sxs-lookup"><span data-stu-id="3bc85-305">Order</span></span>            | <span data-ttu-id="3bc85-306">Verhalten</span><span class="sxs-lookup"><span data-stu-id="3bc85-306">Behavior</span></span> |
| :--------------: | -------- |
| <span data-ttu-id="3bc85-307">-1</span><span class="sxs-lookup"><span data-stu-id="3bc85-307">-1</span></span>               | <span data-ttu-id="3bc85-308">Die Route wird vor anderen Routen verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="3bc85-308">The route is processed before other routes are processed.</span></span> |
| <span data-ttu-id="3bc85-309">0</span><span class="sxs-lookup"><span data-stu-id="3bc85-309">0</span></span>                | <span data-ttu-id="3bc85-310">Die Reihenfolge wurde nicht angegeben (Standardwert).</span><span class="sxs-lookup"><span data-stu-id="3bc85-310">Order isn't specified (default value).</span></span> <span data-ttu-id="3bc85-311">Wenn Sie `Order` (`Order = null`) nicht zuweisen, wird für die Verarbeitung der Route `Order` standardmäßig auf 0 (null) gesetzt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-311">Not assigning `Order` (`Order = null`) defaults the route `Order` to 0 (zero) for processing.</span></span> |
| <span data-ttu-id="3bc85-312">1, 2, &hellip; n</span><span class="sxs-lookup"><span data-stu-id="3bc85-312">1, 2, &hellip; n</span></span> | <span data-ttu-id="3bc85-313">Gibt die Verarbeitungsreihenfolge für die Route an.</span><span class="sxs-lookup"><span data-stu-id="3bc85-313">Specifies the route processing order.</span></span> |

<span data-ttu-id="3bc85-314">Die Routenverarbeitung wird gemäß der Konvention eingerichtet:</span><span class="sxs-lookup"><span data-stu-id="3bc85-314">Route processing is established by convention:</span></span>

* <span data-ttu-id="3bc85-315">Routen werden in sequenzieller Reihenfolge verarbeitet (-1, 0, 1, 2, &hellip; n).</span><span class="sxs-lookup"><span data-stu-id="3bc85-315">Routes are processed in sequential order (-1, 0, 1, 2, &hellip; n).</span></span>
* <span data-ttu-id="3bc85-316">Wenn Routen dieselbe `Order` aufweisen, wird zuerst die spezifischste Route abgeglichen, danach folgen die weniger spezifischen Routen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-316">When routes have the same `Order`, the most specific route is matched first followed by less specific routes.</span></span>
* <span data-ttu-id="3bc85-317">Wenn Routen mit derselben `Order` und derselben Anzahl Parameter mit einer Anforderungs-URL übereinstimmen, werden Routen in der Reihenfolge verarbeitet, in der sie der <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection> hinzugefügt wurden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-317">When routes with the same `Order` and the same number of parameters match a request URL, routes are processed in the order that they're added to the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection>.</span></span>

<span data-ttu-id="3bc85-318">Vermeiden Sie nach Möglichkeit die Abhängigkeit von einer festgelegten Verarbeitungsreihenfolge für Routen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-318">If possible, avoid depending on an established route processing order.</span></span> <span data-ttu-id="3bc85-319">Im Allgemeinen wird beim Routing die richtige Route mittels URL-Zuordnung ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-319">Generally, routing selects the correct route with URL matching.</span></span> <span data-ttu-id="3bc85-320">Wenn Sie zum ordnungsgemäßen Weiterleiten von Anforderungen für die Route `Order`-Eigenschaften festlegen müssen, ist das Routingschema der App für Clients wahrscheinlich irreführend und in Bezug auf die Verwaltung störanfälliger.</span><span class="sxs-lookup"><span data-stu-id="3bc85-320">If you must set route `Order` properties to route requests correctly, the app's routing scheme is probably confusing to clients and fragile to maintain.</span></span> <span data-ttu-id="3bc85-321">Versuchen Sie daher, das Routingschema der App zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-321">Seek to simplify the app's routing scheme.</span></span> <span data-ttu-id="3bc85-322">Bei der Beispiel-App ist eine explizite Verarbeitungsreihenfolge für Routen erforderlich, um mit einer einzigen App verschiedene Routingszenarios veranschaulichen zu können.</span><span class="sxs-lookup"><span data-stu-id="3bc85-322">The sample app requires an explicit route processing order to demonstrate several routing scenarios using a single app.</span></span> <span data-ttu-id="3bc85-323">In Produktions-Apps sollten Sie jedoch nach Möglichkeit eine Festlegung von `Order` für Routen vermeiden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-323">However, you should attempt to avoid the practice of setting route `Order` in production apps.</span></span>

<span data-ttu-id="3bc85-324">Razor Pages-Routing und MVC Controller-Routing verwenden eine gemeinsame Implementierung.</span><span class="sxs-lookup"><span data-stu-id="3bc85-324">Razor Pages routing and MVC controller routing share an implementation.</span></span> <span data-ttu-id="3bc85-325">Informationen zur Reihenfolge von Routen in den MVC-Themen finden Sie unter [Routing zu Controlleraktionen: Ordnen der Attributrouten](xref:mvc/controllers/routing#ordering-attribute-routes).</span><span class="sxs-lookup"><span data-stu-id="3bc85-325">Information on route order in the MVC topics is available at [Routing to controller actions: Ordering attribute routes](xref:mvc/controllers/routing#ordering-attribute-routes).</span></span>

## <a name="model-conventions"></a><span data-ttu-id="3bc85-326">Modellkonventionen</span><span class="sxs-lookup"><span data-stu-id="3bc85-326">Model conventions</span></span>

<span data-ttu-id="3bc85-327">Fügen Sie einen Delegaten für <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> hinzu, um [Modellkonventionen](xref:mvc/controllers/application-model#conventions) hinzuzufügen, die auf Razor Pages anwendbar sind.</span><span class="sxs-lookup"><span data-stu-id="3bc85-327">Add a delegate for <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> to add [model conventions](xref:mvc/controllers/application-model#conventions) that apply to Razor Pages.</span></span>

### <a name="add-a-route-model-convention-to-all-pages"></a><span data-ttu-id="3bc85-328">Hinzufügen einer Routenmodellkonvention zu allen Seiten</span><span class="sxs-lookup"><span data-stu-id="3bc85-328">Add a route model convention to all pages</span></span>

<span data-ttu-id="3bc85-329">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> zum Erstellen und Hinzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> zur Auflistung der Instanzen von <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention>, die während der Erstellung von Seitenroutenmodellen eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-329">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page route model construction.</span></span>

<span data-ttu-id="3bc85-330">Die Beispielanwendung fügt dann zu allen Seiten der App eine `{globalTemplate?}`-Routenvorlage hinzu:</span><span class="sxs-lookup"><span data-stu-id="3bc85-330">The sample app adds a `{globalTemplate?}` route template to all of the pages in the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Conventions/GlobalTemplatePageRouteModelConvention.cs?name=snippet1)]

<span data-ttu-id="3bc85-331">Die Eigenschaft <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> ist für das <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> auf `1` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-331">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `1`.</span></span> <span data-ttu-id="3bc85-332">Dadurch wird das folgende Routenabgleichsverhalten in der Beispiel-App sichergestellt:</span><span class="sxs-lookup"><span data-stu-id="3bc85-332">This ensures the following route matching behavior in the sample app:</span></span>

* <span data-ttu-id="3bc85-333">Eine Routenvorlage für `TheContactPage/{text?}` wird später in diesem Thema hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-333">A route template for `TheContactPage/{text?}` is added later in the topic.</span></span> <span data-ttu-id="3bc85-334">Die Standardreihenfolge der Route für die Kontaktseite lautet `null` (`Order = 0`). Somit wird sie vor der Routenvorlage `{globalTemplate?}` abgeglichen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-334">The Contact Page route has a default order of `null` (`Order = 0`), so it matches before the `{globalTemplate?}` route template.</span></span>
* <span data-ttu-id="3bc85-335">Eine Routenvorlage für `{aboutTemplate?}` wird später in diesem Thema hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-335">An `{aboutTemplate?}` route template is added later in the topic.</span></span> <span data-ttu-id="3bc85-336">Die Vorlage `{aboutTemplate?}` erhält den `Order` von `2`.</span><span class="sxs-lookup"><span data-stu-id="3bc85-336">The `{aboutTemplate?}` template is given an `Order` of `2`.</span></span> <span data-ttu-id="3bc85-337">Wenn die Seite „Info“ unter `/About/RouteDataValue` angefordert wird, wird „RouteDataValue“ in die Vorlage `RouteData.Values["globalTemplate"]` geladen (`Order = 1`) und nicht in `RouteData.Values["aboutTemplate"]` (`Order = 2`), da die Eigenschaft `Order` auf null festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-337">When the About page is requested at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["aboutTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>
* <span data-ttu-id="3bc85-338">Eine Routenvorlage für `{otherPagesTemplate?}` wird später in diesem Thema hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-338">An `{otherPagesTemplate?}` route template is added later in the topic.</span></span> <span data-ttu-id="3bc85-339">Die Vorlage `{otherPagesTemplate?}` erhält den `Order` von `2`.</span><span class="sxs-lookup"><span data-stu-id="3bc85-339">The `{otherPagesTemplate?}` template is given an `Order` of `2`.</span></span> <span data-ttu-id="3bc85-340">Wenn eine Seite im Ordner *Pages/OtherPages* mit einem Routenparameter (z. B. `/OtherPages/Page1/RouteDataValue`) angefordert wird, wird „RouteDataValue“ in die Vorlage `RouteData.Values["globalTemplate"]` geladen (`Order = 1`) und nicht in `RouteData.Values["otherPagesTemplate"]` (`Order = 2`), da die Eigenschaft `Order` auf null festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-340">When any page in the *Pages/OtherPages* folder is requested with a route parameter (for example, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="3bc85-341">Legen Sie die `Order` möglichst nicht fest, sodass `Order = 0` gilt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-341">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="3bc85-342">Verlassen Sie sich bei der Auswahl der richtigen Route auf die Routenplanung.</span><span class="sxs-lookup"><span data-stu-id="3bc85-342">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="3bc85-343">Optionen für Razor Pages, z. B. das Hinzufügen von <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions>, werden hinzugefügt, wenn MVC der Dienstauflistung in `Startup.ConfigureServices` hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="3bc85-343">Razor Pages options, such as adding <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions>, are added when MVC is added to the service collection in `Startup.ConfigureServices`.</span></span> <span data-ttu-id="3bc85-344">In der [Beispiel-App](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/) finden Sie ein Beispiel hierfür.</span><span class="sxs-lookup"><span data-stu-id="3bc85-344">For an example, see the [sample app](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/).</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet1)]

<span data-ttu-id="3bc85-345">Fordern Sie die Seite „Info“ der Beispielanwendung unter `localhost:5000/About/GlobalRouteValue` an, und prüfen Sie das Ergebnis:</span><span class="sxs-lookup"><span data-stu-id="3bc85-345">Request the sample's About page at `localhost:5000/About/GlobalRouteValue` and inspect the result:</span></span>

![Die Seite „Info“ wird mit einem Routensegment von GlobalRouteValue angefordert.](razor-pages-conventions/_static/about-page-global-template.png)

### <a name="add-an-app-model-convention-to-all-pages"></a><span data-ttu-id="3bc85-348">Hinzufügen einer App-Modellkonvention zu allen Seiten</span><span class="sxs-lookup"><span data-stu-id="3bc85-348">Add an app model convention to all pages</span></span>

<span data-ttu-id="3bc85-349">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> zum Erstellen und Hinzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> zur Auflistung der Instanzen von <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention>, die während der Erstellung von Seitenanwendungsmodellen eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-349">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page app model construction.</span></span>

<span data-ttu-id="3bc85-350">Die Beispielanwendung enthält eine `AddHeaderAttribute`-Klasse, damit das Verwenden dieser und anderer Konventionen weiter unten in diesem Thema gezeigt werden kann.</span><span class="sxs-lookup"><span data-stu-id="3bc85-350">To demonstrate this and other conventions later in the topic, the sample app includes an `AddHeaderAttribute` class.</span></span> <span data-ttu-id="3bc85-351">Der Klassenkonstruktor akzeptiert eine `name`-Zeichenfolge und ein `values`-Zeichenfolgenarray.</span><span class="sxs-lookup"><span data-stu-id="3bc85-351">The class constructor accepts a `name` string and a `values` string array.</span></span> <span data-ttu-id="3bc85-352">Diese Werte werden in seiner `OnResultExecuting`-Methode verwendet, um einen Antwortheader einzurichten.</span><span class="sxs-lookup"><span data-stu-id="3bc85-352">These values are used in its `OnResultExecuting` method to set a response header.</span></span> <span data-ttu-id="3bc85-353">Die Klasse wird im Abschnitt [Seitenmodellaktionskonventionen](#page-model-action-conventions) weiter unten in diesem Artikel erläutert.</span><span class="sxs-lookup"><span data-stu-id="3bc85-353">The full class is shown in the [Page model action conventions](#page-model-action-conventions) section later in the topic.</span></span>

<span data-ttu-id="3bc85-354">Die Beispielanwendung verwendet die Klasse `AddHeaderAttribute`, um den Header `GlobalHeader` zu allen Seiten der Anwendung hinzuzufügen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-354">The sample app uses the `AddHeaderAttribute` class to add a header, `GlobalHeader`, to all of the pages in the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Conventions/GlobalHeaderPageApplicationModelConvention.cs?name=snippet1)]

<span data-ttu-id="3bc85-355">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="3bc85-355">*Startup.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet2)]

<span data-ttu-id="3bc85-356">Fordern Sie die Seite „Info“ der Beispielanwendung unter `localhost:5000/About` an, und überprüfen Sie die Header, um das Ergebnis zu sehen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-356">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Antwortheader der Seite „Info“ zeigen an, dass „GlobalHeader“ hinzugefügt wurde.](razor-pages-conventions/_static/about-page-global-header.png)

### <a name="add-a-handler-model-convention-to-all-pages"></a><span data-ttu-id="3bc85-358">Hinzufügen einer Handlermodellkonvention zu allen Seiten</span><span class="sxs-lookup"><span data-stu-id="3bc85-358">Add a handler model convention to all pages</span></span>

<span data-ttu-id="3bc85-359">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> zum Erstellen und Hinzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageHandlerModelConvention> zur Auflistung der Instanzen von <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention>, die während der Erstellung von Seitenhandlermodellen eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-359">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageHandlerModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page handler model construction.</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Conventions/GlobalPageHandlerModelConvention.cs?name=snippet1)]

<span data-ttu-id="3bc85-360">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="3bc85-360">*Startup.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet10)]

## <a name="page-route-action-conventions"></a><span data-ttu-id="3bc85-361">Konventionen für Seitenroutenaktionen</span><span class="sxs-lookup"><span data-stu-id="3bc85-361">Page route action conventions</span></span>

<span data-ttu-id="3bc85-362">Der Standardanbieter für Routenmodelle, der von <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelProvider> abgeleitet wird, ruft Konventionen auf, die entwickelt wurden, um Erweiterungspunkte zum Konfigurieren von Seitenrouten bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-362">The default route model provider that derives from <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelProvider> invokes conventions which are designed to provide extensibility points for configuring page routes.</span></span>

### <a name="folder-route-model-convention"></a><span data-ttu-id="3bc85-363">Ordnerroutenmodellkonvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-363">Folder route model convention</span></span>

<span data-ttu-id="3bc85-364">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> zum Erstellen und Hinzuzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention>, die eine Aktion für <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> für alle Seiten im angegebenen Ordner aufruft.</span><span class="sxs-lookup"><span data-stu-id="3bc85-364">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> for all of the pages under the specified folder.</span></span>

<span data-ttu-id="3bc85-365">Die Beispielanwendung verwendet <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*>, um eine `{otherPagesTemplate?}`-Routenvorlage zu den Seiten im Ordner *OtherPages* hinzuzufügen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-365">The sample app uses <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> to add an `{otherPagesTemplate?}` route template to the pages in the *OtherPages* folder:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet3)]

<span data-ttu-id="3bc85-366">Die Eigenschaft <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> ist für das <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> auf `2` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-366">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `2`.</span></span> <span data-ttu-id="3bc85-367">Dadurch wird sichergestellt, dass die Vorlage für `{globalTemplate?}`, die weiter oben in diesem Thema für `1` festgelegt wurde, in Bezug auf die erste Position für einen Routendatenwert vorgezogen wird, wenn nur ein einziger Routenwert angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-367">This ensures that the template for `{globalTemplate?}` (set earlier in the topic to `1`) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="3bc85-368">Wenn eine Seite im Ordner *Pages/OtherPages* mit einem Routenparameterwert (z. B. `/OtherPages/Page1/RouteDataValue`) angefordert wird, wird „RouteDataValue“ in die Vorlage `RouteData.Values["globalTemplate"]` geladen (`Order = 1`) und nicht in `RouteData.Values["otherPagesTemplate"]` (`Order = 2`), da die Eigenschaft `Order` auf null festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-368">If a page in the *Pages/OtherPages* folder is requested with a route parameter value (for example, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="3bc85-369">Legen Sie die `Order` möglichst nicht fest, sodass `Order = 0` gilt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-369">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="3bc85-370">Verlassen Sie sich bei der Auswahl der richtigen Route auf die Routenplanung.</span><span class="sxs-lookup"><span data-stu-id="3bc85-370">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="3bc85-371">Fordern Sie die Seite „Seite1“ der Beispielanwendung unter `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` an, und prüfen Sie das Ergebnis:</span><span class="sxs-lookup"><span data-stu-id="3bc85-371">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` and inspect the result:</span></span>

![Seite1 aus dem Ordner „OtherPages“ wird mit einem Routensegment von GlobalRouteValue und OtherPagesRouteValue angefordert.](razor-pages-conventions/_static/otherpages-page1-global-and-otherpages-templates.png)

### <a name="page-route-model-convention"></a><span data-ttu-id="3bc85-374">Seitenroutenmodellkonvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-374">Page route model convention</span></span>

<span data-ttu-id="3bc85-375">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageRouteModelConvention*> zum Erstellen und Hinzuzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention>, die eine Aktion für das <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> für die Seite mit dem angegebenen Namen aufruft.</span><span class="sxs-lookup"><span data-stu-id="3bc85-375">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageRouteModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> for the page with the specified name.</span></span>

<span data-ttu-id="3bc85-376">Die Beispielanwendung verwendet `AddPageRouteModelConvention`, um eine `{aboutTemplate?}`-Routenvorlage zu der Seite „Info“ hinzuzufügen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-376">The sample app uses `AddPageRouteModelConvention` to add an `{aboutTemplate?}` route template to the About page:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet4)]

<span data-ttu-id="3bc85-377">Die Eigenschaft <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> ist für das <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> auf `2` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-377">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `2`.</span></span> <span data-ttu-id="3bc85-378">Dadurch wird sichergestellt, dass die Vorlage für `{globalTemplate?}`, die weiter oben in diesem Thema für `1` festgelegt wurde, in Bezug auf die erste Position für einen Routendatenwert vorgezogen wird, wenn nur ein einziger Routenwert angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-378">This ensures that the template for `{globalTemplate?}` (set earlier in the topic to `1`) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="3bc85-379">Wenn die Seite „Info“ mit einem Routenparameterwert unter `/About/RouteDataValue` angefordert wird, wird „RouteDataValue“ in die Vorlage `RouteData.Values["globalTemplate"]` geladen (`Order = 1`) und nicht in `RouteData.Values["aboutTemplate"]` (`Order = 2`), da die Eigenschaft `Order` auf null festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-379">If the About page is requested with a route parameter value at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["aboutTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="3bc85-380">Legen Sie die `Order` möglichst nicht fest, sodass `Order = 0` gilt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-380">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="3bc85-381">Verlassen Sie sich bei der Auswahl der richtigen Route auf die Routenplanung.</span><span class="sxs-lookup"><span data-stu-id="3bc85-381">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="3bc85-382">Fordern Sie die Seite „Info“ der Beispielanwendung unter `localhost:5000/About/GlobalRouteValue/AboutRouteValue` an, und prüfen Sie das Ergebnis:</span><span class="sxs-lookup"><span data-stu-id="3bc85-382">Request the sample's About page at `localhost:5000/About/GlobalRouteValue/AboutRouteValue` and inspect the result:</span></span>

![Die Seite „Info“ wird mit Routensegmenten für GlobalRouteValue und AboutRouteValue angefordert.](razor-pages-conventions/_static/about-page-global-and-about-templates.png)

## <a name="use-a-parameter-transformer-to-customize-page-routes"></a><span data-ttu-id="3bc85-385">Verwenden eines Parametertransformators zum Anpassen von Seitenrouten</span><span class="sxs-lookup"><span data-stu-id="3bc85-385">Use a parameter transformer to customize page routes</span></span>

<span data-ttu-id="3bc85-386">Von ASP.NET Core generierte Seitenrouten können mit einem Parametertransformator angepasst werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-386">Page routes generated by ASP.NET Core can be customized using a parameter transformer.</span></span> <span data-ttu-id="3bc85-387">Ein Parametertransformator implementiert `IOutboundParameterTransformer` und wandelt den Wert der Parameter um.</span><span class="sxs-lookup"><span data-stu-id="3bc85-387">A parameter transformer implements `IOutboundParameterTransformer` and transforms the value of parameters.</span></span> <span data-ttu-id="3bc85-388">Beispielsweise ändert ein benutzerdefinierter `SlugifyParameterTransformer`-Parametertransformator den Routenwert `SubscriptionManagement` in `subscription-management`.</span><span class="sxs-lookup"><span data-stu-id="3bc85-388">For example, a custom `SlugifyParameterTransformer` parameter transformer changes the `SubscriptionManagement` route value to `subscription-management`.</span></span>

<span data-ttu-id="3bc85-389">Mit der Seitenroutenmodellkonvention `PageRouteTransformerConvention` wird ein Parametertransformator auf die Ordner- und Dateinamenssegmente von automatisch generierten Seitenrouten in einer App angewendet.</span><span class="sxs-lookup"><span data-stu-id="3bc85-389">The `PageRouteTransformerConvention` page route model convention applies a parameter transformer to the folder and file name segments of automatically generated page routes in an app.</span></span> <span data-ttu-id="3bc85-390">Für die Razor Pages-Datei unter */Pages/SubscriptionManagement/ViewAll.cshtml* wird die Route beispielsweise von `/SubscriptionManagement/ViewAll` in `/subscription-management/view-all` umgeschrieben.</span><span class="sxs-lookup"><span data-stu-id="3bc85-390">For example, the Razor Pages file at */Pages/SubscriptionManagement/ViewAll.cshtml* would have its route rewritten from `/SubscriptionManagement/ViewAll` to `/subscription-management/view-all`.</span></span>

<span data-ttu-id="3bc85-391">Mit `PageRouteTransformerConvention` werden nur die automatisch generierten Segmente einer Seitenroute transformiert, die aus dem Ordner- und Dateinamen von Razor Pages stammen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-391">`PageRouteTransformerConvention` only transforms the automatically generated segments of a page route that come from the Razor Pages folder and file name.</span></span> <span data-ttu-id="3bc85-392">Mit der `@page`-Anweisung hinzugefügte Routensegmente werden nicht transformiert.</span><span class="sxs-lookup"><span data-stu-id="3bc85-392">It doesn't transform route segments added with the `@page` directive.</span></span> <span data-ttu-id="3bc85-393">Auch durch <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*> hinzugefügte Routen werden mit dieser Konvention nicht transformiert.</span><span class="sxs-lookup"><span data-stu-id="3bc85-393">The convention also doesn't transform routes added by <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*>.</span></span>

<span data-ttu-id="3bc85-394">Die `PageRouteTransformerConvention` wird als Option in `Startup.ConfigureServices` registriert:</span><span class="sxs-lookup"><span data-stu-id="3bc85-394">The `PageRouteTransformerConvention` is registered as an option in `Startup.ConfigureServices`:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddRazorPagesOptions(options =>
        {
            options.Conventions.Add(
                new PageRouteTransformerConvention(
                    new SlugifyParameterTransformer()));
        });
}

public class SlugifyParameterTransformer : IOutboundParameterTransformer
{
    public string TransformOutbound(object value)
    {
        if (value == null) { return null; }

        // Slugify value
        return Regex.Replace(value.ToString(), "([a-z])([A-Z])", "$1-$2").ToLower();
    }
}
```

## <a name="configure-a-page-route"></a><span data-ttu-id="3bc85-395">Konfigurieren einer Seitenroute</span><span class="sxs-lookup"><span data-stu-id="3bc85-395">Configure a page route</span></span>

<span data-ttu-id="3bc85-396">Konfigurieren Sie mithilfe von <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*> eine Route zu einer Seite am angegebenen Seitenpfad.</span><span class="sxs-lookup"><span data-stu-id="3bc85-396">Use <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*> to configure a route to a page at the specified page path.</span></span> <span data-ttu-id="3bc85-397">Generierte Links, die auf die Seite verweisen, verwenden die von Ihnen angegebene Route.</span><span class="sxs-lookup"><span data-stu-id="3bc85-397">Generated links to the page use your specified route.</span></span> <span data-ttu-id="3bc85-398">`AddPageRoute` verwendet die `AddPageRouteModelConvention` zum Aufbauen der Route.</span><span class="sxs-lookup"><span data-stu-id="3bc85-398">`AddPageRoute` uses `AddPageRouteModelConvention` to establish the route.</span></span>

<span data-ttu-id="3bc85-399">Die Beispielanwendung erstellt für *Contact.cshtml* eine Route zur Seite `/TheContactPage`:</span><span class="sxs-lookup"><span data-stu-id="3bc85-399">The sample app creates a route to `/TheContactPage` for *Contact.cshtml*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet5)]

<span data-ttu-id="3bc85-400">Die Seite „Kontakt“ kann auch unter `/Contact` über ihre Standardroute erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-400">The Contact page can also be reached at `/Contact` via its default route.</span></span>

<span data-ttu-id="3bc85-401">Die benutzerdefinierte Route der Beispielanwendung, die zur Seite „Kontakt“ führt, ermöglicht das Verwenden eines optionalen `text`-Routensegments (`{text?}`).</span><span class="sxs-lookup"><span data-stu-id="3bc85-401">The sample app's custom route to the Contact page allows for an optional `text` route segment (`{text?}`).</span></span> <span data-ttu-id="3bc85-402">Die Seite enthält dieses optionale Segment auch in ihrer `@page`-Anweisung, für den Fall, dass der Besucher über die `/Contact`-Route auf die Seite zugreift:</span><span class="sxs-lookup"><span data-stu-id="3bc85-402">The page also includes this optional segment in its `@page` directive in case the visitor accesses the page at its `/Contact` route:</span></span>

[!code-cshtml[](razor-pages-conventions/samples/2.x/SampleApp/Pages/Contact.cshtml?highlight=1)]

<span data-ttu-id="3bc85-403">Beachten Sie, dass die URL, die für den Link **Kontakt** in der gerenderten Seite generiert wurde, die aktualisierte Route widerspiegelt:</span><span class="sxs-lookup"><span data-stu-id="3bc85-403">Note that the URL generated for the **Contact** link in the rendered page reflects the updated route:</span></span>

![Kontaktlink der Beispielanwendung in der Navigationsleiste](razor-pages-conventions/_static/contact-link.png)

![Beim Überprüfen des Kontaktlinks in der gerenderten HTML zeigt sich, dass das HREF-Attribut auf „/TheContactPage“ festgelegt wurde.](razor-pages-conventions/_static/contact-link-source.png)

<span data-ttu-id="3bc85-406">Sie können die Kontaktseite entweder über deren übliche Route, `/Contact`, oder über die benutzerdefinierte Route, `/TheContactPage`, besuchen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-406">Visit the Contact page at either its ordinary route, `/Contact`, or the custom route, `/TheContactPage`.</span></span> <span data-ttu-id="3bc85-407">Wenn Sie ein zusätzliches `text`-Routensegment bereitstellen, wird dieses HTML-codierte Segment auf der Seite angezeigt:</span><span class="sxs-lookup"><span data-stu-id="3bc85-407">If you supply an additional `text` route segment, the page shows the HTML-encoded segment that you provide:</span></span>

![Beispiel für das Bereitstellen eines optionalen „Text“-Routensegments mit „TextValue“ in der URL in der Ansicht des Microsoft Edge-Browsers](razor-pages-conventions/_static/route-segment-with-custom-route.png)

## <a name="page-model-action-conventions"></a><span data-ttu-id="3bc85-410">Konventionen für Seitenmodellaktionen</span><span class="sxs-lookup"><span data-stu-id="3bc85-410">Page model action conventions</span></span>

<span data-ttu-id="3bc85-411">Der Standardanbieter für Seitenmodelle, der <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelProvider> implementiert, ruft Konventionen auf, die entwickelt wurden, um Erweiterungspunkte zum Konfigurieren von Seitenmodellen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-411">The default page model provider that implements <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelProvider> invokes conventions which are designed to provide extensibility points for configuring page models.</span></span> <span data-ttu-id="3bc85-412">Diese Konventionen sind beim Erstellen und Ändern von Seitenermittlungs- und Verarbeitungsszenarios hilfreich.</span><span class="sxs-lookup"><span data-stu-id="3bc85-412">These conventions are useful when building and modifying page discovery and processing scenarios.</span></span>

<span data-ttu-id="3bc85-413">In den Beispielen in diesem Abschnitt verwendet die Beispielanwendung eine `AddHeaderAttribute`-Klasse, also ein <xref:Microsoft.AspNetCore.Mvc.Filters.ResultFilterAttribute>, das einen Antwortheader verwendet:</span><span class="sxs-lookup"><span data-stu-id="3bc85-413">For the examples in this section, the sample app uses an `AddHeaderAttribute` class, which is a <xref:Microsoft.AspNetCore.Mvc.Filters.ResultFilterAttribute>, that applies a response header:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Filters/AddHeader.cs?name=snippet1)]

<span data-ttu-id="3bc85-414">Das Beispiel veranschaulicht mithilfe von Konventionen, wie das Attribut auf alle Seiten in einem Ordner und auf eine Einzelseite angewendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="3bc85-414">Using conventions, the sample demonstrates how to apply the attribute to all of the pages in a folder and to a single page.</span></span>

<span data-ttu-id="3bc85-415">**Ordner-App-Modellkonvention**</span><span class="sxs-lookup"><span data-stu-id="3bc85-415">**Folder app model convention**</span></span>

<span data-ttu-id="3bc85-416">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderApplicationModelConvention*> zum Erstellen und Hinzuzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention>, die eine Aktion für <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel>-Instanzen für alle Seiten im angegebenen Ordner aufruft.</span><span class="sxs-lookup"><span data-stu-id="3bc85-416">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderApplicationModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> that invokes an action on <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> instances for all pages under the specified folder.</span></span>

<span data-ttu-id="3bc85-417">Im Beispiel wird die Verwendung der `AddFolderApplicationModelConvention` durch Hinzufügen eines Headers, `OtherPagesHeader`, zu den Seiten im Ordner *OtherPages* der Anwendung veranschaulicht:</span><span class="sxs-lookup"><span data-stu-id="3bc85-417">The sample demonstrates the use of `AddFolderApplicationModelConvention` by adding a header, `OtherPagesHeader`, to the pages inside the *OtherPages* folder of the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet6)]

<span data-ttu-id="3bc85-418">Fordern Sie die Seite „Seite1“ der Beispielanwendung unter `localhost:5000/OtherPages/Page1` an, und prüfen Sie die Header, um das Ergebnis zu sehen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-418">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1` and inspect the headers to view the result:</span></span>

![Antwortheader der Seite „OtherPages/Seite1“ zeigt, dass der OtherPagesHeader hinzugefügt wurde.](razor-pages-conventions/_static/page1-otherpages-header.png)

<span data-ttu-id="3bc85-420">**Seiten-App-Modellkonvention**</span><span class="sxs-lookup"><span data-stu-id="3bc85-420">**Page app model convention**</span></span>

<span data-ttu-id="3bc85-421">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageApplicationModelConvention*> zum Erstellen und Hinzuzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention>, die eine Aktion für das <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> für die Seite mit dem angegebenen Namen aufruft.</span><span class="sxs-lookup"><span data-stu-id="3bc85-421">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageApplicationModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> for the page with the specified name.</span></span>

<span data-ttu-id="3bc85-422">Im Beispiel wird das Verwenden von `AddPageApplicationModelConvention` durch Hinzufügen eines Headers, `AboutHeader`, auf der Seite „Info“ veranschaulicht:</span><span class="sxs-lookup"><span data-stu-id="3bc85-422">The sample demonstrates the use of `AddPageApplicationModelConvention` by adding a header, `AboutHeader`, to the About page:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet7)]

<span data-ttu-id="3bc85-423">Fordern Sie die Seite „Info“ der Beispielanwendung unter `localhost:5000/About` an, und überprüfen Sie die Header, um das Ergebnis zu sehen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-423">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Antwortheader der Seite „Info“ zeigen, dass AboutHeader hinzugefügt wurde.](razor-pages-conventions/_static/about-page-about-header.png)

<span data-ttu-id="3bc85-425">**Konfigurieren eines Filters**</span><span class="sxs-lookup"><span data-stu-id="3bc85-425">**Configure a filter**</span></span>

<span data-ttu-id="3bc85-426">Der angegebene Filter, der angewendet werden soll, wird mit <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="3bc85-426"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> configures the specified filter to apply.</span></span> <span data-ttu-id="3bc85-427">Sie können Filterklassen selbst implementieren. In der Beispielanwendung wird jedoch gezeigt, wie Sie einen Filter in einen Lambdaausdruck implementieren. Dieser wird dann im Hintergrund als Zuordnungsinstanz implementiert, die einen Filter zurückgibt:</span><span class="sxs-lookup"><span data-stu-id="3bc85-427">You can implement a filter class, but the sample app shows how to implement a filter in a lambda expression, which is implemented behind-the-scenes as a factory that returns a filter:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet8)]

<span data-ttu-id="3bc85-428">Das Seiten-App-Modell wird verwendet, um den relativen Pfad für Segmente zu überprüfen, die zur Seite „Seite2“ im Ordner *OtherPages* führen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-428">The page app model is used to check the relative path for segments that lead to the Page2 page in the *OtherPages* folder.</span></span> <span data-ttu-id="3bc85-429">Wenn die Bedingung erfüllt ist, wird ein Header hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-429">If the condition passes, a header is added.</span></span> <span data-ttu-id="3bc85-430">Wenn dies nicht der Fall ist, wird der `EmptyFilter` angewendet.</span><span class="sxs-lookup"><span data-stu-id="3bc85-430">If not, the `EmptyFilter` is applied.</span></span>

<span data-ttu-id="3bc85-431">`EmptyFilter` ist ein [Aktionsfilter](xref:mvc/controllers/filters#action-filters).</span><span class="sxs-lookup"><span data-stu-id="3bc85-431">`EmptyFilter` is an [Action filter](xref:mvc/controllers/filters#action-filters).</span></span> <span data-ttu-id="3bc85-432">Wenn der Pfad `OtherPages/Page2` nicht enthält, hat der `EmptyFilter`, wie vorgesehen, keine Auswirkung, da Aktionsfilter von Razor Pages ignoriert werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-432">Since Action filters are ignored by Razor Pages, the `EmptyFilter` has no effect as intended if the path doesn't contain `OtherPages/Page2`.</span></span>

<span data-ttu-id="3bc85-433">Fordern Sie die Seite „Seite2“ der Beispielanwendung unter `localhost:5000/OtherPages/Page2` an, und prüfen Sie die Header, um das Ergebnis zu sehen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-433">Request the sample's Page2 page at `localhost:5000/OtherPages/Page2` and inspect the headers to view the result:</span></span>

![Der Header „OtherPagesPage2Header“ wird zur Antwort für „Seite2“ hinzugefügt.](razor-pages-conventions/_static/page2-filter-header.png)

<span data-ttu-id="3bc85-435">**Konfigurieren einer Filterzuordnungsinstanz**</span><span class="sxs-lookup"><span data-stu-id="3bc85-435">**Configure a filter factory**</span></span>

<span data-ttu-id="3bc85-436">Mit <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> wird die angegebene Zuordnungsinstanz so konfiguriert, dass sie [Filter](xref:mvc/controllers/filters) auf alle Razor Pages anwendet.</span><span class="sxs-lookup"><span data-stu-id="3bc85-436"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> configures the specified factory to apply [filters](xref:mvc/controllers/filters) to all Razor Pages.</span></span>

<span data-ttu-id="3bc85-437">Die Beispielanwendung bietet Ihnen die Möglichkeit des beispielhaften Verwendens einer [Filterzuordnungsinstanz](xref:mvc/controllers/filters#ifilterfactory) durch Hinzufügen des Headers `FilterFactoryHeader` zu den Seiten der Anwendung, der zwei Werte besitzt:</span><span class="sxs-lookup"><span data-stu-id="3bc85-437">The sample app provides an example of using a [filter factory](xref:mvc/controllers/filters#ifilterfactory) by adding a header, `FilterFactoryHeader`, with two values to the app's pages:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet9)]

<span data-ttu-id="3bc85-438">*AddHeaderWithFactory.cs*:</span><span class="sxs-lookup"><span data-stu-id="3bc85-438">*AddHeaderWithFactory.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Factories/AddHeaderWithFactory.cs?name=snippet1)]

<span data-ttu-id="3bc85-439">Fordern Sie die Seite „Info“ der Beispielanwendung unter `localhost:5000/About` an, und überprüfen Sie die Header, um das Ergebnis zu sehen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-439">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Die Antwortheader der Seite „Info“ zeigen, dass zwei Header des Typs „FilterFactoryHeader“ hinzugefügt wurden.](razor-pages-conventions/_static/about-page-filter-factory-header.png)

## <a name="mvc-filters-and-the-page-filter-ipagefilter"></a><span data-ttu-id="3bc85-441">Die MVC-Filter und der Seitenfilter (IPageFilter)</span><span class="sxs-lookup"><span data-stu-id="3bc85-441">MVC Filters and the Page filter (IPageFilter)</span></span>

<span data-ttu-id="3bc85-442">MVC-[Aktionsfilter](xref:mvc/controllers/filters#action-filters) werden von Razor Pages ignoriert, da diese Handlermethoden verwenden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-442">MVC [Action filters](xref:mvc/controllers/filters#action-filters) are ignored by Razor Pages, since Razor Pages use handler methods.</span></span> <span data-ttu-id="3bc85-443">Darüber hinaus stehen die folgenden MVC-Filtertypen zur Verfügung: [Autorisierung](xref:mvc/controllers/filters#authorization-filters), [Ausnahme](xref:mvc/controllers/filters#exception-filters), [Ressource](xref:mvc/controllers/filters#resource-filters) und [Ergebnis](xref:mvc/controllers/filters#result-filters).</span><span class="sxs-lookup"><span data-stu-id="3bc85-443">Other types of MVC filters are available for you to use: [Authorization](xref:mvc/controllers/filters#authorization-filters), [Exception](xref:mvc/controllers/filters#exception-filters), [Resource](xref:mvc/controllers/filters#resource-filters), and [Result](xref:mvc/controllers/filters#result-filters).</span></span> <span data-ttu-id="3bc85-444">Weitere Informationen finden Sie im Thema [Filter](xref:mvc/controllers/filters).</span><span class="sxs-lookup"><span data-stu-id="3bc85-444">For more information, see the [Filters](xref:mvc/controllers/filters) topic.</span></span>

<span data-ttu-id="3bc85-445">Der Seitenfilter (<xref:Microsoft.AspNetCore.Mvc.Filters.IPageFilter>) ist ein Filter, der auf Razor Pages anwendbar ist.</span><span class="sxs-lookup"><span data-stu-id="3bc85-445">The Page filter (<xref:Microsoft.AspNetCore.Mvc.Filters.IPageFilter>) is a filter that applies to Razor Pages.</span></span> <span data-ttu-id="3bc85-446">Weitere Informationen finden Sie unter [Filtermethoden für Razor-Seiten](xref:razor-pages/filter).</span><span class="sxs-lookup"><span data-stu-id="3bc85-446">For more information, see [Filter methods for Razor Pages](xref:razor-pages/filter).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="3bc85-447">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="3bc85-447">Additional resources</span></span>

* <xref:security/authorization/razor-pages-authorization>
* <xref:mvc/controllers/areas#areas-with-razor-pages>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="3bc85-448">Erfahren Sie, wie Sie in Apps für Razor-Seiten mithilfe von [Konventionen für Seitenrouten und App-Modellanbieter](xref:mvc/controllers/application-model#conventions) das Seitenrouting, die Ermittlung und die Verarbeitung steuern können.</span><span class="sxs-lookup"><span data-stu-id="3bc85-448">Learn how to use page [route and app model provider conventions](xref:mvc/controllers/application-model#conventions) to control page routing, discovery, and processing in Razor Pages apps.</span></span>

<span data-ttu-id="3bc85-449">Wenn Sie für einzelne Seiten benutzerdefinierte Seitenrouten konfigurieren müssen, sollten Sie das Routing zu den Seiten mithilfe der [AddPageRoute-Konvention](#configure-a-page-route) konfigurieren, die weiter unten in diesem Artikel beschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="3bc85-449">When you need to configure custom page routes for individual pages, configure routing to pages with the [AddPageRoute convention](#configure-a-page-route) described later in this topic.</span></span>

<span data-ttu-id="3bc85-450">Um eine Seitenroute anzugeben oder einer Route Segmente oder Parameter hinzuzufügen, verwenden Sie die Anweisung `@page` der Seite.</span><span class="sxs-lookup"><span data-stu-id="3bc85-450">To specify a page route, add route segments, or add parameters to a route, use the page's `@page` directive.</span></span> <span data-ttu-id="3bc85-451">Weitere Informationen finden Sie unter [Benutzerdefinierte Routen](xref:razor-pages/index#custom-routes).</span><span class="sxs-lookup"><span data-stu-id="3bc85-451">For more information, see [Custom routes](xref:razor-pages/index#custom-routes).</span></span>

<span data-ttu-id="3bc85-452">Es gibt reservierte Wörter, die nicht als Routensegmente oder Parameternamen verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="3bc85-452">There are reserved words that can't be used as route segments or parameter names.</span></span> <span data-ttu-id="3bc85-453">Weitere Informationen finden Sie unter [Routing: Reservierte Routingnamen](xref:fundamentals/routing#reserved-routing-names).</span><span class="sxs-lookup"><span data-stu-id="3bc85-453">For more information, see [Routing: Reserved routing names](xref:fundamentals/routing#reserved-routing-names).</span></span>

<span data-ttu-id="3bc85-454">[Anzeigen oder Herunterladen von Beispielcode](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/) ([Vorgehensweise zum Herunterladen](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="3bc85-454">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/) ([how to download](xref:index#how-to-download-a-sample))</span></span>

| <span data-ttu-id="3bc85-455">Szenario</span><span class="sxs-lookup"><span data-stu-id="3bc85-455">Scenario</span></span> | <span data-ttu-id="3bc85-456">Dieses Beispiel veranschaulicht Folgendes:</span><span class="sxs-lookup"><span data-stu-id="3bc85-456">The sample demonstrates ...</span></span> |
| -------- | --------------------------- |
| [<span data-ttu-id="3bc85-457">Model conventions (Modellkonventionen)</span><span class="sxs-lookup"><span data-stu-id="3bc85-457">Model conventions</span></span>](#model-conventions)<br><br><span data-ttu-id="3bc85-458">Conventions.Add</span><span class="sxs-lookup"><span data-stu-id="3bc85-458">Conventions.Add</span></span><ul><li><span data-ttu-id="3bc85-459">IPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-459">IPageRouteModelConvention</span></span></li><li><span data-ttu-id="3bc85-460">IPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-460">IPageApplicationModelConvention</span></span></li><li><span data-ttu-id="3bc85-461">IPageHandlerModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-461">IPageHandlerModelConvention</span></span></li></ul> | <span data-ttu-id="3bc85-462">Das Hinzufügen einer Routenvorlage und eines Headers zu den Seiten einer App</span><span class="sxs-lookup"><span data-stu-id="3bc85-462">Add a route template and header to an app's pages.</span></span> |
| [<span data-ttu-id="3bc85-463">Konventionen für Seitenroutenaktionen</span><span class="sxs-lookup"><span data-stu-id="3bc85-463">Page route action conventions</span></span>](#page-route-action-conventions)<ul><li><span data-ttu-id="3bc85-464">AddFolderRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-464">AddFolderRouteModelConvention</span></span></li><li><span data-ttu-id="3bc85-465">AddPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-465">AddPageRouteModelConvention</span></span></li><li><span data-ttu-id="3bc85-466">AddPageRoute</span><span class="sxs-lookup"><span data-stu-id="3bc85-466">AddPageRoute</span></span></li></ul> | <span data-ttu-id="3bc85-467">Das Hinzufügen einer Routenvorlage zu Seiten in einem Ordner und zu einer Einzelseite</span><span class="sxs-lookup"><span data-stu-id="3bc85-467">Add a route template to pages in a folder and to a single page.</span></span> |
| [<span data-ttu-id="3bc85-468">Konventionen für Seitenmodellaktionen</span><span class="sxs-lookup"><span data-stu-id="3bc85-468">Page model action conventions</span></span>](#page-model-action-conventions)<ul><li><span data-ttu-id="3bc85-469">AddFolderApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-469">AddFolderApplicationModelConvention</span></span></li><li><span data-ttu-id="3bc85-470">AddPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-470">AddPageApplicationModelConvention</span></span></li><li><span data-ttu-id="3bc85-471">ConfigureFilter (Filterklasse, Lambdaausdruck oder Filterzuordnungsinstanz)</span><span class="sxs-lookup"><span data-stu-id="3bc85-471">ConfigureFilter (filter class, lambda expression, or filter factory)</span></span></li></ul> | <span data-ttu-id="3bc85-472">Das Hinzufügen eines Headers zu Seiten in einem Ordner, das Hinzufügen eines Headers zu einer einzelnen Seite und das Konfigurieren einer [Filter-Factoy](xref:mvc/controllers/filters#ifilterfactory) zum Hinzufügen eines Headers zu den Seiten einer App.</span><span class="sxs-lookup"><span data-stu-id="3bc85-472">Add a header to pages in a folder, add a header to a single page, and configure a [filter factory](xref:mvc/controllers/filters#ifilterfactory) to add a header to an app's pages.</span></span> |

<span data-ttu-id="3bc85-473">Konventionen für Razor Pages werden <xref:Microsoft.Extensions.DependencyInjection.MvcServiceCollectionExtensions.AddMvc*> mithilfe der Erweiterungsmethode <xref:Microsoft.Extensions.DependencyInjection.MvcRazorPagesMvcBuilderExtensions.AddRazorPagesOptions*> unter der Dienstklasse in der Klasse `Startup` hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-473">Razor Pages conventions are added and configured using the <xref:Microsoft.Extensions.DependencyInjection.MvcRazorPagesMvcBuilderExtensions.AddRazorPagesOptions*> extension method to <xref:Microsoft.Extensions.DependencyInjection.MvcServiceCollectionExtensions.AddMvc*> on the service collection in the `Startup` class.</span></span> <span data-ttu-id="3bc85-474">Die folgenden Beispiele der Konvention werden später in diesem Thema erläutert:</span><span class="sxs-lookup"><span data-stu-id="3bc85-474">The following convention examples are explained later in this topic:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddRazorPagesOptions(options =>
        {
            options.Conventions.Add( ... );
            options.Conventions.AddFolderRouteModelConvention(
                "/OtherPages", model => { ... });
            options.Conventions.AddPageRouteModelConvention(
                "/About", model => { ... });
            options.Conventions.AddPageRoute(
                "/Contact", "TheContactPage/{text?}");
            options.Conventions.AddFolderApplicationModelConvention(
                "/OtherPages", model => { ... });
            options.Conventions.AddPageApplicationModelConvention(
                "/About", model => { ... });
            options.Conventions.ConfigureFilter(model => { ... });
            options.Conventions.ConfigureFilter( ... );
        });
}
```

## <a name="route-order"></a><span data-ttu-id="3bc85-475">Routenreihenfolge</span><span class="sxs-lookup"><span data-stu-id="3bc85-475">Route order</span></span>

<span data-ttu-id="3bc85-476">Routen geben eine <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> für die Verarbeitung an (Routenabgleich).</span><span class="sxs-lookup"><span data-stu-id="3bc85-476">Routes specify an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> for processing (route matching).</span></span>

| <span data-ttu-id="3bc85-477">Auftrag</span><span class="sxs-lookup"><span data-stu-id="3bc85-477">Order</span></span>            | <span data-ttu-id="3bc85-478">Verhalten</span><span class="sxs-lookup"><span data-stu-id="3bc85-478">Behavior</span></span> |
| :--------------: | -------- |
| <span data-ttu-id="3bc85-479">-1</span><span class="sxs-lookup"><span data-stu-id="3bc85-479">-1</span></span>               | <span data-ttu-id="3bc85-480">Die Route wird vor anderen Routen verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="3bc85-480">The route is processed before other routes are processed.</span></span> |
| <span data-ttu-id="3bc85-481">0</span><span class="sxs-lookup"><span data-stu-id="3bc85-481">0</span></span>                | <span data-ttu-id="3bc85-482">Die Reihenfolge wurde nicht angegeben (Standardwert).</span><span class="sxs-lookup"><span data-stu-id="3bc85-482">Order isn't specified (default value).</span></span> <span data-ttu-id="3bc85-483">Wenn Sie `Order` (`Order = null`) nicht zuweisen, wird für die Verarbeitung der Route `Order` standardmäßig auf 0 (null) gesetzt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-483">Not assigning `Order` (`Order = null`) defaults the route `Order` to 0 (zero) for processing.</span></span> |
| <span data-ttu-id="3bc85-484">1, 2, &hellip; n</span><span class="sxs-lookup"><span data-stu-id="3bc85-484">1, 2, &hellip; n</span></span> | <span data-ttu-id="3bc85-485">Gibt die Verarbeitungsreihenfolge für die Route an.</span><span class="sxs-lookup"><span data-stu-id="3bc85-485">Specifies the route processing order.</span></span> |

<span data-ttu-id="3bc85-486">Die Routenverarbeitung wird gemäß der Konvention eingerichtet:</span><span class="sxs-lookup"><span data-stu-id="3bc85-486">Route processing is established by convention:</span></span>

* <span data-ttu-id="3bc85-487">Routen werden in sequenzieller Reihenfolge verarbeitet (-1, 0, 1, 2, &hellip; n).</span><span class="sxs-lookup"><span data-stu-id="3bc85-487">Routes are processed in sequential order (-1, 0, 1, 2, &hellip; n).</span></span>
* <span data-ttu-id="3bc85-488">Wenn Routen dieselbe `Order` aufweisen, wird zuerst die spezifischste Route abgeglichen, danach folgen die weniger spezifischen Routen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-488">When routes have the same `Order`, the most specific route is matched first followed by less specific routes.</span></span>
* <span data-ttu-id="3bc85-489">Wenn Routen mit derselben `Order` und derselben Anzahl Parameter mit einer Anforderungs-URL übereinstimmen, werden Routen in der Reihenfolge verarbeitet, in der sie der <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection> hinzugefügt wurden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-489">When routes with the same `Order` and the same number of parameters match a request URL, routes are processed in the order that they're added to the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection>.</span></span>

<span data-ttu-id="3bc85-490">Vermeiden Sie nach Möglichkeit die Abhängigkeit von einer festgelegten Verarbeitungsreihenfolge für Routen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-490">If possible, avoid depending on an established route processing order.</span></span> <span data-ttu-id="3bc85-491">Im Allgemeinen wird beim Routing die richtige Route mittels URL-Zuordnung ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-491">Generally, routing selects the correct route with URL matching.</span></span> <span data-ttu-id="3bc85-492">Wenn Sie zum ordnungsgemäßen Weiterleiten von Anforderungen für die Route `Order`-Eigenschaften festlegen müssen, ist das Routingschema der App für Clients wahrscheinlich irreführend und in Bezug auf die Verwaltung störanfälliger.</span><span class="sxs-lookup"><span data-stu-id="3bc85-492">If you must set route `Order` properties to route requests correctly, the app's routing scheme is probably confusing to clients and fragile to maintain.</span></span> <span data-ttu-id="3bc85-493">Versuchen Sie daher, das Routingschema der App zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-493">Seek to simplify the app's routing scheme.</span></span> <span data-ttu-id="3bc85-494">Bei der Beispiel-App ist eine explizite Verarbeitungsreihenfolge für Routen erforderlich, um mit einer einzigen App verschiedene Routingszenarios veranschaulichen zu können.</span><span class="sxs-lookup"><span data-stu-id="3bc85-494">The sample app requires an explicit route processing order to demonstrate several routing scenarios using a single app.</span></span> <span data-ttu-id="3bc85-495">In Produktions-Apps sollten Sie jedoch nach Möglichkeit eine Festlegung von `Order` für Routen vermeiden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-495">However, you should attempt to avoid the practice of setting route `Order` in production apps.</span></span>

<span data-ttu-id="3bc85-496">Razor Pages-Routing und MVC Controller-Routing verwenden eine gemeinsame Implementierung.</span><span class="sxs-lookup"><span data-stu-id="3bc85-496">Razor Pages routing and MVC controller routing share an implementation.</span></span> <span data-ttu-id="3bc85-497">Informationen zur Reihenfolge von Routen in den MVC-Themen finden Sie unter [Routing zu Controlleraktionen: Ordnen der Attributrouten](xref:mvc/controllers/routing#ordering-attribute-routes).</span><span class="sxs-lookup"><span data-stu-id="3bc85-497">Information on route order in the MVC topics is available at [Routing to controller actions: Ordering attribute routes](xref:mvc/controllers/routing#ordering-attribute-routes).</span></span>

## <a name="model-conventions"></a><span data-ttu-id="3bc85-498">Modellkonventionen</span><span class="sxs-lookup"><span data-stu-id="3bc85-498">Model conventions</span></span>

<span data-ttu-id="3bc85-499">Fügen Sie einen Delegaten für <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> hinzu, um [Modellkonventionen](xref:mvc/controllers/application-model#conventions) hinzuzufügen, die auf Razor Pages anwendbar sind.</span><span class="sxs-lookup"><span data-stu-id="3bc85-499">Add a delegate for <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> to add [model conventions](xref:mvc/controllers/application-model#conventions) that apply to Razor Pages.</span></span>

### <a name="add-a-route-model-convention-to-all-pages"></a><span data-ttu-id="3bc85-500">Hinzufügen einer Routenmodellkonvention zu allen Seiten</span><span class="sxs-lookup"><span data-stu-id="3bc85-500">Add a route model convention to all pages</span></span>

<span data-ttu-id="3bc85-501">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> zum Erstellen und Hinzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> zur Auflistung der Instanzen von <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention>, die während der Erstellung von Seitenroutenmodellen eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-501">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page route model construction.</span></span>

<span data-ttu-id="3bc85-502">Die Beispielanwendung fügt dann zu allen Seiten der App eine `{globalTemplate?}`-Routenvorlage hinzu:</span><span class="sxs-lookup"><span data-stu-id="3bc85-502">The sample app adds a `{globalTemplate?}` route template to all of the pages in the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Conventions/GlobalTemplatePageRouteModelConvention.cs?name=snippet1)]

<span data-ttu-id="3bc85-503">Die Eigenschaft <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> ist für das <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> auf `1` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-503">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `1`.</span></span> <span data-ttu-id="3bc85-504">Dadurch wird das folgende Routenabgleichsverhalten in der Beispiel-App sichergestellt:</span><span class="sxs-lookup"><span data-stu-id="3bc85-504">This ensures the following route matching behavior in the sample app:</span></span>

* <span data-ttu-id="3bc85-505">Eine Routenvorlage für `TheContactPage/{text?}` wird später in diesem Thema hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-505">A route template for `TheContactPage/{text?}` is added later in the topic.</span></span> <span data-ttu-id="3bc85-506">Die Standardreihenfolge der Route für die Kontaktseite lautet `null` (`Order = 0`). Somit wird sie vor der Routenvorlage `{globalTemplate?}` abgeglichen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-506">The Contact Page route has a default order of `null` (`Order = 0`), so it matches before the `{globalTemplate?}` route template.</span></span>
* <span data-ttu-id="3bc85-507">Eine Routenvorlage für `{aboutTemplate?}` wird später in diesem Thema hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-507">An `{aboutTemplate?}` route template is added later in the topic.</span></span> <span data-ttu-id="3bc85-508">Die Vorlage `{aboutTemplate?}` erhält den `Order` von `2`.</span><span class="sxs-lookup"><span data-stu-id="3bc85-508">The `{aboutTemplate?}` template is given an `Order` of `2`.</span></span> <span data-ttu-id="3bc85-509">Wenn die Seite „Info“ unter `/About/RouteDataValue` angefordert wird, wird „RouteDataValue“ in die Vorlage `RouteData.Values["globalTemplate"]` geladen (`Order = 1`) und nicht in `RouteData.Values["aboutTemplate"]` (`Order = 2`), da die Eigenschaft `Order` auf null festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-509">When the About page is requested at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["aboutTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>
* <span data-ttu-id="3bc85-510">Eine Routenvorlage für `{otherPagesTemplate?}` wird später in diesem Thema hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-510">An `{otherPagesTemplate?}` route template is added later in the topic.</span></span> <span data-ttu-id="3bc85-511">Die Vorlage `{otherPagesTemplate?}` erhält den `Order` von `2`.</span><span class="sxs-lookup"><span data-stu-id="3bc85-511">The `{otherPagesTemplate?}` template is given an `Order` of `2`.</span></span> <span data-ttu-id="3bc85-512">Wenn eine Seite im Ordner *Pages/OtherPages* mit einem Routenparameter (z. B. `/OtherPages/Page1/RouteDataValue`) angefordert wird, wird „RouteDataValue“ in die Vorlage `RouteData.Values["globalTemplate"]` geladen (`Order = 1`) und nicht in `RouteData.Values["otherPagesTemplate"]` (`Order = 2`), da die Eigenschaft `Order` auf null festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-512">When any page in the *Pages/OtherPages* folder is requested with a route parameter (for example, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="3bc85-513">Legen Sie die `Order` möglichst nicht fest, sodass `Order = 0` gilt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-513">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="3bc85-514">Verlassen Sie sich bei der Auswahl der richtigen Route auf die Routenplanung.</span><span class="sxs-lookup"><span data-stu-id="3bc85-514">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="3bc85-515">Optionen für Razor Pages, z. B. das Hinzufügen von <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions>, werden hinzugefügt, wenn MVC der Dienstauflistung in `Startup.ConfigureServices` hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="3bc85-515">Razor Pages options, such as adding <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions>, are added when MVC is added to the service collection in `Startup.ConfigureServices`.</span></span> <span data-ttu-id="3bc85-516">In der [Beispiel-App](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/) finden Sie ein Beispiel hierfür.</span><span class="sxs-lookup"><span data-stu-id="3bc85-516">For an example, see the [sample app](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/).</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet1)]

<span data-ttu-id="3bc85-517">Fordern Sie die Seite „Info“ der Beispielanwendung unter `localhost:5000/About/GlobalRouteValue` an, und prüfen Sie das Ergebnis:</span><span class="sxs-lookup"><span data-stu-id="3bc85-517">Request the sample's About page at `localhost:5000/About/GlobalRouteValue` and inspect the result:</span></span>

![Die Seite „Info“ wird mit einem Routensegment von GlobalRouteValue angefordert.](razor-pages-conventions/_static/about-page-global-template.png)

### <a name="add-an-app-model-convention-to-all-pages"></a><span data-ttu-id="3bc85-520">Hinzufügen einer App-Modellkonvention zu allen Seiten</span><span class="sxs-lookup"><span data-stu-id="3bc85-520">Add an app model convention to all pages</span></span>

<span data-ttu-id="3bc85-521">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> zum Erstellen und Hinzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> zur Auflistung der Instanzen von <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention>, die während der Erstellung von Seitenanwendungsmodellen eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-521">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page app model construction.</span></span>

<span data-ttu-id="3bc85-522">Die Beispielanwendung enthält eine `AddHeaderAttribute`-Klasse, damit das Verwenden dieser und anderer Konventionen weiter unten in diesem Thema gezeigt werden kann.</span><span class="sxs-lookup"><span data-stu-id="3bc85-522">To demonstrate this and other conventions later in the topic, the sample app includes an `AddHeaderAttribute` class.</span></span> <span data-ttu-id="3bc85-523">Der Klassenkonstruktor akzeptiert eine `name`-Zeichenfolge und ein `values`-Zeichenfolgenarray.</span><span class="sxs-lookup"><span data-stu-id="3bc85-523">The class constructor accepts a `name` string and a `values` string array.</span></span> <span data-ttu-id="3bc85-524">Diese Werte werden in seiner `OnResultExecuting`-Methode verwendet, um einen Antwortheader einzurichten.</span><span class="sxs-lookup"><span data-stu-id="3bc85-524">These values are used in its `OnResultExecuting` method to set a response header.</span></span> <span data-ttu-id="3bc85-525">Die Klasse wird im Abschnitt [Seitenmodellaktionskonventionen](#page-model-action-conventions) weiter unten in diesem Artikel erläutert.</span><span class="sxs-lookup"><span data-stu-id="3bc85-525">The full class is shown in the [Page model action conventions](#page-model-action-conventions) section later in the topic.</span></span>

<span data-ttu-id="3bc85-526">Die Beispielanwendung verwendet die Klasse `AddHeaderAttribute`, um den Header `GlobalHeader` zu allen Seiten der Anwendung hinzuzufügen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-526">The sample app uses the `AddHeaderAttribute` class to add a header, `GlobalHeader`, to all of the pages in the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Conventions/GlobalHeaderPageApplicationModelConvention.cs?name=snippet1)]

<span data-ttu-id="3bc85-527">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="3bc85-527">*Startup.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet2)]

<span data-ttu-id="3bc85-528">Fordern Sie die Seite „Info“ der Beispielanwendung unter `localhost:5000/About` an, und überprüfen Sie die Header, um das Ergebnis zu sehen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-528">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Antwortheader der Seite „Info“ zeigen an, dass „GlobalHeader“ hinzugefügt wurde.](razor-pages-conventions/_static/about-page-global-header.png)

### <a name="add-a-handler-model-convention-to-all-pages"></a><span data-ttu-id="3bc85-530">Hinzufügen einer Handlermodellkonvention zu allen Seiten</span><span class="sxs-lookup"><span data-stu-id="3bc85-530">Add a handler model convention to all pages</span></span>

<span data-ttu-id="3bc85-531">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> zum Erstellen und Hinzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageHandlerModelConvention> zur Auflistung der Instanzen von <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention>, die während der Erstellung von Seitenhandlermodellen eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-531">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageHandlerModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page handler model construction.</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Conventions/GlobalPageHandlerModelConvention.cs?name=snippet1)]

<span data-ttu-id="3bc85-532">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="3bc85-532">*Startup.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet10)]

## <a name="page-route-action-conventions"></a><span data-ttu-id="3bc85-533">Konventionen für Seitenroutenaktionen</span><span class="sxs-lookup"><span data-stu-id="3bc85-533">Page route action conventions</span></span>

<span data-ttu-id="3bc85-534">Der Standardanbieter für Routenmodelle, der von <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelProvider> abgeleitet wird, ruft Konventionen auf, die entwickelt wurden, um Erweiterungspunkte zum Konfigurieren von Seitenrouten bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-534">The default route model provider that derives from <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelProvider> invokes conventions which are designed to provide extensibility points for configuring page routes.</span></span>

### <a name="folder-route-model-convention"></a><span data-ttu-id="3bc85-535">Ordnerroutenmodellkonvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-535">Folder route model convention</span></span>

<span data-ttu-id="3bc85-536">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> zum Erstellen und Hinzuzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention>, die eine Aktion für <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> für alle Seiten im angegebenen Ordner aufruft.</span><span class="sxs-lookup"><span data-stu-id="3bc85-536">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> for all of the pages under the specified folder.</span></span>

<span data-ttu-id="3bc85-537">Die Beispielanwendung verwendet <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*>, um eine `{otherPagesTemplate?}`-Routenvorlage zu den Seiten im Ordner *OtherPages* hinzuzufügen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-537">The sample app uses <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> to add an `{otherPagesTemplate?}` route template to the pages in the *OtherPages* folder:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet3)]

<span data-ttu-id="3bc85-538">Die Eigenschaft <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> ist für das <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> auf `2` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-538">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `2`.</span></span> <span data-ttu-id="3bc85-539">Dadurch wird sichergestellt, dass die Vorlage für `{globalTemplate?}`, die weiter oben in diesem Thema für `1` festgelegt wurde, in Bezug auf die erste Position für einen Routendatenwert vorgezogen wird, wenn nur ein einziger Routenwert angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-539">This ensures that the template for `{globalTemplate?}` (set earlier in the topic to `1`) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="3bc85-540">Wenn eine Seite im Ordner *Pages/OtherPages* mit einem Routenparameterwert (z. B. `/OtherPages/Page1/RouteDataValue`) angefordert wird, wird „RouteDataValue“ in die Vorlage `RouteData.Values["globalTemplate"]` geladen (`Order = 1`) und nicht in `RouteData.Values["otherPagesTemplate"]` (`Order = 2`), da die Eigenschaft `Order` auf null festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-540">If a page in the *Pages/OtherPages* folder is requested with a route parameter value (for example, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="3bc85-541">Legen Sie die `Order` möglichst nicht fest, sodass `Order = 0` gilt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-541">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="3bc85-542">Verlassen Sie sich bei der Auswahl der richtigen Route auf die Routenplanung.</span><span class="sxs-lookup"><span data-stu-id="3bc85-542">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="3bc85-543">Fordern Sie die Seite „Seite1“ der Beispielanwendung unter `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` an, und prüfen Sie das Ergebnis:</span><span class="sxs-lookup"><span data-stu-id="3bc85-543">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` and inspect the result:</span></span>

![Seite1 aus dem Ordner „OtherPages“ wird mit einem Routensegment von GlobalRouteValue und OtherPagesRouteValue angefordert.](razor-pages-conventions/_static/otherpages-page1-global-and-otherpages-templates.png)

### <a name="page-route-model-convention"></a><span data-ttu-id="3bc85-546">Seitenroutenmodellkonvention</span><span class="sxs-lookup"><span data-stu-id="3bc85-546">Page route model convention</span></span>

<span data-ttu-id="3bc85-547">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageRouteModelConvention*> zum Erstellen und Hinzuzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention>, die eine Aktion für das <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> für die Seite mit dem angegebenen Namen aufruft.</span><span class="sxs-lookup"><span data-stu-id="3bc85-547">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageRouteModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> for the page with the specified name.</span></span>

<span data-ttu-id="3bc85-548">Die Beispielanwendung verwendet `AddPageRouteModelConvention`, um eine `{aboutTemplate?}`-Routenvorlage zu der Seite „Info“ hinzuzufügen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-548">The sample app uses `AddPageRouteModelConvention` to add an `{aboutTemplate?}` route template to the About page:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet4)]

<span data-ttu-id="3bc85-549">Die Eigenschaft <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> ist für das <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> auf `2` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-549">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `2`.</span></span> <span data-ttu-id="3bc85-550">Dadurch wird sichergestellt, dass die Vorlage für `{globalTemplate?}`, die weiter oben in diesem Thema für `1` festgelegt wurde, in Bezug auf die erste Position für einen Routendatenwert vorgezogen wird, wenn nur ein einziger Routenwert angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-550">This ensures that the template for `{globalTemplate?}` (set earlier in the topic to `1`) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="3bc85-551">Wenn die Seite „Info“ mit einem Routenparameterwert unter `/About/RouteDataValue` angefordert wird, wird „RouteDataValue“ in die Vorlage `RouteData.Values["globalTemplate"]` geladen (`Order = 1`) und nicht in `RouteData.Values["aboutTemplate"]` (`Order = 2`), da die Eigenschaft `Order` auf null festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="3bc85-551">If the About page is requested with a route parameter value at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["aboutTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="3bc85-552">Legen Sie die `Order` möglichst nicht fest, sodass `Order = 0` gilt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-552">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="3bc85-553">Verlassen Sie sich bei der Auswahl der richtigen Route auf die Routenplanung.</span><span class="sxs-lookup"><span data-stu-id="3bc85-553">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="3bc85-554">Fordern Sie die Seite „Info“ der Beispielanwendung unter `localhost:5000/About/GlobalRouteValue/AboutRouteValue` an, und prüfen Sie das Ergebnis:</span><span class="sxs-lookup"><span data-stu-id="3bc85-554">Request the sample's About page at `localhost:5000/About/GlobalRouteValue/AboutRouteValue` and inspect the result:</span></span>

![Die Seite „Info“ wird mit Routensegmenten für GlobalRouteValue und AboutRouteValue angefordert.](razor-pages-conventions/_static/about-page-global-and-about-templates.png)

## <a name="configure-a-page-route"></a><span data-ttu-id="3bc85-557">Konfigurieren einer Seitenroute</span><span class="sxs-lookup"><span data-stu-id="3bc85-557">Configure a page route</span></span>

<span data-ttu-id="3bc85-558">Konfigurieren Sie mithilfe von <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*> eine Route zu einer Seite am angegebenen Seitenpfad.</span><span class="sxs-lookup"><span data-stu-id="3bc85-558">Use <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*> to configure a route to a page at the specified page path.</span></span> <span data-ttu-id="3bc85-559">Generierte Links, die auf die Seite verweisen, verwenden die von Ihnen angegebene Route.</span><span class="sxs-lookup"><span data-stu-id="3bc85-559">Generated links to the page use your specified route.</span></span> <span data-ttu-id="3bc85-560">`AddPageRoute` verwendet die `AddPageRouteModelConvention` zum Aufbauen der Route.</span><span class="sxs-lookup"><span data-stu-id="3bc85-560">`AddPageRoute` uses `AddPageRouteModelConvention` to establish the route.</span></span>

<span data-ttu-id="3bc85-561">Die Beispielanwendung erstellt für *Contact.cshtml* eine Route zur Seite `/TheContactPage`:</span><span class="sxs-lookup"><span data-stu-id="3bc85-561">The sample app creates a route to `/TheContactPage` for *Contact.cshtml*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet5)]

<span data-ttu-id="3bc85-562">Die Seite „Kontakt“ kann auch unter `/Contact` über ihre Standardroute erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-562">The Contact page can also be reached at `/Contact` via its default route.</span></span>

<span data-ttu-id="3bc85-563">Die benutzerdefinierte Route der Beispielanwendung, die zur Seite „Kontakt“ führt, ermöglicht das Verwenden eines optionalen `text`-Routensegments (`{text?}`).</span><span class="sxs-lookup"><span data-stu-id="3bc85-563">The sample app's custom route to the Contact page allows for an optional `text` route segment (`{text?}`).</span></span> <span data-ttu-id="3bc85-564">Die Seite enthält dieses optionale Segment auch in ihrer `@page`-Anweisung, für den Fall, dass der Besucher über die `/Contact`-Route auf die Seite zugreift:</span><span class="sxs-lookup"><span data-stu-id="3bc85-564">The page also includes this optional segment in its `@page` directive in case the visitor accesses the page at its `/Contact` route:</span></span>

[!code-cshtml[](razor-pages-conventions/samples/2.x/SampleApp/Pages/Contact.cshtml?highlight=1)]

<span data-ttu-id="3bc85-565">Beachten Sie, dass die URL, die für den Link **Kontakt** in der gerenderten Seite generiert wurde, die aktualisierte Route widerspiegelt:</span><span class="sxs-lookup"><span data-stu-id="3bc85-565">Note that the URL generated for the **Contact** link in the rendered page reflects the updated route:</span></span>

![Kontaktlink der Beispielanwendung in der Navigationsleiste](razor-pages-conventions/_static/contact-link.png)

![Beim Überprüfen des Kontaktlinks in der gerenderten HTML zeigt sich, dass das HREF-Attribut auf „/TheContactPage“ festgelegt wurde.](razor-pages-conventions/_static/contact-link-source.png)

<span data-ttu-id="3bc85-568">Sie können die Kontaktseite entweder über deren übliche Route, `/Contact`, oder über die benutzerdefinierte Route, `/TheContactPage`, besuchen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-568">Visit the Contact page at either its ordinary route, `/Contact`, or the custom route, `/TheContactPage`.</span></span> <span data-ttu-id="3bc85-569">Wenn Sie ein zusätzliches `text`-Routensegment bereitstellen, wird dieses HTML-codierte Segment auf der Seite angezeigt:</span><span class="sxs-lookup"><span data-stu-id="3bc85-569">If you supply an additional `text` route segment, the page shows the HTML-encoded segment that you provide:</span></span>

![Beispiel für das Bereitstellen eines optionalen „Text“-Routensegments mit „TextValue“ in der URL in der Ansicht des Microsoft Edge-Browsers](razor-pages-conventions/_static/route-segment-with-custom-route.png)

## <a name="page-model-action-conventions"></a><span data-ttu-id="3bc85-572">Konventionen für Seitenmodellaktionen</span><span class="sxs-lookup"><span data-stu-id="3bc85-572">Page model action conventions</span></span>

<span data-ttu-id="3bc85-573">Der Standardanbieter für Seitenmodelle, der <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelProvider> implementiert, ruft Konventionen auf, die entwickelt wurden, um Erweiterungspunkte zum Konfigurieren von Seitenmodellen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-573">The default page model provider that implements <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelProvider> invokes conventions which are designed to provide extensibility points for configuring page models.</span></span> <span data-ttu-id="3bc85-574">Diese Konventionen sind beim Erstellen und Ändern von Seitenermittlungs- und Verarbeitungsszenarios hilfreich.</span><span class="sxs-lookup"><span data-stu-id="3bc85-574">These conventions are useful when building and modifying page discovery and processing scenarios.</span></span>

<span data-ttu-id="3bc85-575">In den Beispielen in diesem Abschnitt verwendet die Beispielanwendung eine `AddHeaderAttribute`-Klasse, also ein <xref:Microsoft.AspNetCore.Mvc.Filters.ResultFilterAttribute>, das einen Antwortheader verwendet:</span><span class="sxs-lookup"><span data-stu-id="3bc85-575">For the examples in this section, the sample app uses an `AddHeaderAttribute` class, which is a <xref:Microsoft.AspNetCore.Mvc.Filters.ResultFilterAttribute>, that applies a response header:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Filters/AddHeader.cs?name=snippet1)]

<span data-ttu-id="3bc85-576">Das Beispiel veranschaulicht mithilfe von Konventionen, wie das Attribut auf alle Seiten in einem Ordner und auf eine Einzelseite angewendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="3bc85-576">Using conventions, the sample demonstrates how to apply the attribute to all of the pages in a folder and to a single page.</span></span>

<span data-ttu-id="3bc85-577">**Ordner-App-Modellkonvention**</span><span class="sxs-lookup"><span data-stu-id="3bc85-577">**Folder app model convention**</span></span>

<span data-ttu-id="3bc85-578">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderApplicationModelConvention*> zum Erstellen und Hinzuzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention>, die eine Aktion für <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel>-Instanzen für alle Seiten im angegebenen Ordner aufruft.</span><span class="sxs-lookup"><span data-stu-id="3bc85-578">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderApplicationModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> that invokes an action on <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> instances for all pages under the specified folder.</span></span>

<span data-ttu-id="3bc85-579">Im Beispiel wird die Verwendung der `AddFolderApplicationModelConvention` durch Hinzufügen eines Headers, `OtherPagesHeader`, zu den Seiten im Ordner *OtherPages* der Anwendung veranschaulicht:</span><span class="sxs-lookup"><span data-stu-id="3bc85-579">The sample demonstrates the use of `AddFolderApplicationModelConvention` by adding a header, `OtherPagesHeader`, to the pages inside the *OtherPages* folder of the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet6)]

<span data-ttu-id="3bc85-580">Fordern Sie die Seite „Seite1“ der Beispielanwendung unter `localhost:5000/OtherPages/Page1` an, und prüfen Sie die Header, um das Ergebnis zu sehen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-580">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1` and inspect the headers to view the result:</span></span>

![Antwortheader der Seite „OtherPages/Seite1“ zeigt, dass der OtherPagesHeader hinzugefügt wurde.](razor-pages-conventions/_static/page1-otherpages-header.png)

<span data-ttu-id="3bc85-582">**Seiten-App-Modellkonvention**</span><span class="sxs-lookup"><span data-stu-id="3bc85-582">**Page app model convention**</span></span>

<span data-ttu-id="3bc85-583">Verwenden Sie <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageApplicationModelConvention*> zum Erstellen und Hinzuzufügen einer <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention>, die eine Aktion für das <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> für die Seite mit dem angegebenen Namen aufruft.</span><span class="sxs-lookup"><span data-stu-id="3bc85-583">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageApplicationModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> for the page with the specified name.</span></span>

<span data-ttu-id="3bc85-584">Im Beispiel wird das Verwenden von `AddPageApplicationModelConvention` durch Hinzufügen eines Headers, `AboutHeader`, auf der Seite „Info“ veranschaulicht:</span><span class="sxs-lookup"><span data-stu-id="3bc85-584">The sample demonstrates the use of `AddPageApplicationModelConvention` by adding a header, `AboutHeader`, to the About page:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet7)]

<span data-ttu-id="3bc85-585">Fordern Sie die Seite „Info“ der Beispielanwendung unter `localhost:5000/About` an, und überprüfen Sie die Header, um das Ergebnis zu sehen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-585">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Antwortheader der Seite „Info“ zeigen, dass AboutHeader hinzugefügt wurde.](razor-pages-conventions/_static/about-page-about-header.png)

<span data-ttu-id="3bc85-587">**Konfigurieren eines Filters**</span><span class="sxs-lookup"><span data-stu-id="3bc85-587">**Configure a filter**</span></span>

<span data-ttu-id="3bc85-588">Der angegebene Filter, der angewendet werden soll, wird mit <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="3bc85-588"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> configures the specified filter to apply.</span></span> <span data-ttu-id="3bc85-589">Sie können Filterklassen selbst implementieren. In der Beispielanwendung wird jedoch gezeigt, wie Sie einen Filter in einen Lambdaausdruck implementieren. Dieser wird dann im Hintergrund als Zuordnungsinstanz implementiert, die einen Filter zurückgibt:</span><span class="sxs-lookup"><span data-stu-id="3bc85-589">You can implement a filter class, but the sample app shows how to implement a filter in a lambda expression, which is implemented behind-the-scenes as a factory that returns a filter:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet8)]

<span data-ttu-id="3bc85-590">Das Seiten-App-Modell wird verwendet, um den relativen Pfad für Segmente zu überprüfen, die zur Seite „Seite2“ im Ordner *OtherPages* führen.</span><span class="sxs-lookup"><span data-stu-id="3bc85-590">The page app model is used to check the relative path for segments that lead to the Page2 page in the *OtherPages* folder.</span></span> <span data-ttu-id="3bc85-591">Wenn die Bedingung erfüllt ist, wird ein Header hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3bc85-591">If the condition passes, a header is added.</span></span> <span data-ttu-id="3bc85-592">Wenn dies nicht der Fall ist, wird der `EmptyFilter` angewendet.</span><span class="sxs-lookup"><span data-stu-id="3bc85-592">If not, the `EmptyFilter` is applied.</span></span>

<span data-ttu-id="3bc85-593">`EmptyFilter` ist ein [Aktionsfilter](xref:mvc/controllers/filters#action-filters).</span><span class="sxs-lookup"><span data-stu-id="3bc85-593">`EmptyFilter` is an [Action filter](xref:mvc/controllers/filters#action-filters).</span></span> <span data-ttu-id="3bc85-594">Wenn der Pfad `OtherPages/Page2` nicht enthält, hat der `EmptyFilter`, wie vorgesehen, keine Auswirkung, da Aktionsfilter von Razor Pages ignoriert werden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-594">Since Action filters are ignored by Razor Pages, the `EmptyFilter` has no effect as intended if the path doesn't contain `OtherPages/Page2`.</span></span>

<span data-ttu-id="3bc85-595">Fordern Sie die Seite „Seite2“ der Beispielanwendung unter `localhost:5000/OtherPages/Page2` an, und prüfen Sie die Header, um das Ergebnis zu sehen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-595">Request the sample's Page2 page at `localhost:5000/OtherPages/Page2` and inspect the headers to view the result:</span></span>

![Der Header „OtherPagesPage2Header“ wird zur Antwort für „Seite2“ hinzugefügt.](razor-pages-conventions/_static/page2-filter-header.png)

<span data-ttu-id="3bc85-597">**Konfigurieren einer Filterzuordnungsinstanz**</span><span class="sxs-lookup"><span data-stu-id="3bc85-597">**Configure a filter factory**</span></span>

<span data-ttu-id="3bc85-598">Mit <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> wird die angegebene Zuordnungsinstanz so konfiguriert, dass sie [Filter](xref:mvc/controllers/filters) auf alle Razor Pages anwendet.</span><span class="sxs-lookup"><span data-stu-id="3bc85-598"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> configures the specified factory to apply [filters](xref:mvc/controllers/filters) to all Razor Pages.</span></span>

<span data-ttu-id="3bc85-599">Die Beispielanwendung bietet Ihnen die Möglichkeit des beispielhaften Verwendens einer [Filterzuordnungsinstanz](xref:mvc/controllers/filters#ifilterfactory) durch Hinzufügen des Headers `FilterFactoryHeader` zu den Seiten der Anwendung, der zwei Werte besitzt:</span><span class="sxs-lookup"><span data-stu-id="3bc85-599">The sample app provides an example of using a [filter factory](xref:mvc/controllers/filters#ifilterfactory) by adding a header, `FilterFactoryHeader`, with two values to the app's pages:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet9)]

<span data-ttu-id="3bc85-600">*AddHeaderWithFactory.cs*:</span><span class="sxs-lookup"><span data-stu-id="3bc85-600">*AddHeaderWithFactory.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Factories/AddHeaderWithFactory.cs?name=snippet1)]

<span data-ttu-id="3bc85-601">Fordern Sie die Seite „Info“ der Beispielanwendung unter `localhost:5000/About` an, und überprüfen Sie die Header, um das Ergebnis zu sehen:</span><span class="sxs-lookup"><span data-stu-id="3bc85-601">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Die Antwortheader der Seite „Info“ zeigen, dass zwei Header des Typs „FilterFactoryHeader“ hinzugefügt wurden.](razor-pages-conventions/_static/about-page-filter-factory-header.png)

## <a name="mvc-filters-and-the-page-filter-ipagefilter"></a><span data-ttu-id="3bc85-603">Die MVC-Filter und der Seitenfilter (IPageFilter)</span><span class="sxs-lookup"><span data-stu-id="3bc85-603">MVC Filters and the Page filter (IPageFilter)</span></span>

<span data-ttu-id="3bc85-604">MVC-[Aktionsfilter](xref:mvc/controllers/filters#action-filters) werden von Razor Pages ignoriert, da diese Handlermethoden verwenden.</span><span class="sxs-lookup"><span data-stu-id="3bc85-604">MVC [Action filters](xref:mvc/controllers/filters#action-filters) are ignored by Razor Pages, since Razor Pages use handler methods.</span></span> <span data-ttu-id="3bc85-605">Darüber hinaus stehen die folgenden MVC-Filtertypen zur Verfügung: [Autorisierung](xref:mvc/controllers/filters#authorization-filters), [Ausnahme](xref:mvc/controllers/filters#exception-filters), [Ressource](xref:mvc/controllers/filters#resource-filters) und [Ergebnis](xref:mvc/controllers/filters#result-filters).</span><span class="sxs-lookup"><span data-stu-id="3bc85-605">Other types of MVC filters are available for you to use: [Authorization](xref:mvc/controllers/filters#authorization-filters), [Exception](xref:mvc/controllers/filters#exception-filters), [Resource](xref:mvc/controllers/filters#resource-filters), and [Result](xref:mvc/controllers/filters#result-filters).</span></span> <span data-ttu-id="3bc85-606">Weitere Informationen finden Sie im Thema [Filter](xref:mvc/controllers/filters).</span><span class="sxs-lookup"><span data-stu-id="3bc85-606">For more information, see the [Filters](xref:mvc/controllers/filters) topic.</span></span>

<span data-ttu-id="3bc85-607">Der Seitenfilter (<xref:Microsoft.AspNetCore.Mvc.Filters.IPageFilter>) ist ein Filter, der auf Razor Pages anwendbar ist.</span><span class="sxs-lookup"><span data-stu-id="3bc85-607">The Page filter (<xref:Microsoft.AspNetCore.Mvc.Filters.IPageFilter>) is a filter that applies to Razor Pages.</span></span> <span data-ttu-id="3bc85-608">Weitere Informationen finden Sie unter [Filtermethoden für Razor-Seiten](xref:razor-pages/filter).</span><span class="sxs-lookup"><span data-stu-id="3bc85-608">For more information, see [Filter methods for Razor Pages](xref:razor-pages/filter).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="3bc85-609">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="3bc85-609">Additional resources</span></span>

* <xref:security/authorization/razor-pages-authorization>
* <xref:mvc/controllers/areas#areas-with-razor-pages>

::: moniker-end
